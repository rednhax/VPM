<Window
    x:Class="VPM.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:System="clr-namespace:System;assembly=mscorlib"
    xmlns:local="clr-namespace:VPM"
    xmlns:shell="clr-namespace:System.Windows.Shell;assembly=PresentationFramework"
    Title="VPM - Ready"
    Width="1200"
    Height="800"
    Background="{DynamicResource {x:Static SystemColors.WindowBrushKey}}"
    Icon="pack://application:,,,/icon.ico"
    PreviewKeyDown="MainWindow_PreviewKeyDown"
    WindowStartupLocation="CenterScreen">
    <WindowChrome.WindowChrome>
        <WindowChrome
            CaptionHeight="32"
            CornerRadius="8"
            GlassFrameThickness="0"
            ResizeBorderThickness="5" />
    </WindowChrome.WindowChrome>
    <Window.Resources>
        <CollectionViewSource x:Key="PackagesView" />
        <CollectionViewSource x:Key="ScenesView" />
        <BooleanToVisibilityConverter x:Key="BoolToVis" />
        <local:ContentCountsConverter x:Key="ContentCountsConverter" />
        <local:ThumbnailPathConverter x:Key="ThumbnailPathConverter" />
        <System:Double x:Key="FilterToggleButtonSize">27</System:Double>
        <System:Double x:Key="LinkedButtonHeight">36</System:Double>
        <Thickness x:Key="StandardMargin">6</Thickness>
        <Thickness x:Key="StandardPadding">6</Thickness>
        <SolidColorBrush x:Key="FocusBorderBrush" Color="#FF0078D7" />
        <SolidColorBrush x:Key="AccentBrush" Color="#FF0078D7" />
        <SolidColorBrush x:Key="AccentPressedBrush" Color="#007ACC" />

        <!--  Global Button Style with Blue Border Hover Effect  -->
        <Style x:Key="BlueHoverButtonStyle" TargetType="{x:Type Button}">
            <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" />
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" />
            <Setter Property="BorderBrush" Value="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Border
                            Padding="{TemplateBinding Padding}"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="{StaticResource CornerRadiusValue}">
                            <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="BorderBrush" Value="{StaticResource AccentBrush}" />
                    <Setter Property="BorderThickness" Value="1" />
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="{StaticResource AccentPressedBrush}" />
                    <Setter Property="Foreground" Value="White" />
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Opacity" Value="0.5" />
                </Trigger>
            </Style.Triggers>
        </Style>

        <!--  Universal Scrollbar Style for all scrollbars  -->
        <Style TargetType="{x:Type ScrollBar}">
            <Setter Property="Background" Value="Transparent" />
            <Style.Triggers>
                <!--  Vertical Scrollbar  -->
                <Trigger Property="Orientation" Value="Vertical">
                    <Setter Property="Width" Value="6" />
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type ScrollBar}">
                                <Grid Margin="3,3,0,0" Background="Transparent">
                                    <Track Name="PART_Track" IsDirectionReversed="True">
                                        <Track.DecreaseRepeatButton>
                                            <RepeatButton
                                                Background="Transparent"
                                                Command="ScrollBar.PageUpCommand"
                                                Opacity="0" />
                                        </Track.DecreaseRepeatButton>
                                        <Track.Thumb>
                                            <Thumb MinHeight="60">
                                                <Thumb.Style>
                                                    <Style TargetType="Thumb">
                                                        <Setter Property="Background" Value="#40808080" />
                                                        <Setter Property="BorderThickness" Value="0" />
                                                        <Setter Property="Template">
                                                            <Setter.Value>
                                                                <ControlTemplate TargetType="Thumb">
                                                                    <Border
                                                                        Margin="3,0,3,0"
                                                                        Background="{TemplateBinding Background}"
                                                                        CornerRadius="{StaticResource CornerRadiusValue}" />
                                                                </ControlTemplate>
                                                            </Setter.Value>
                                                        </Setter>
                                                        <Style.Triggers>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter Property="Background" Value="#60808080" />
                                                            </Trigger>
                                                            <Trigger Property="IsDragging" Value="True">
                                                                <Setter Property="Background" Value="#80808080" />
                                                            </Trigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </Thumb.Style>
                                            </Thumb>
                                        </Track.Thumb>
                                        <Track.IncreaseRepeatButton>
                                            <RepeatButton
                                                Background="Transparent"
                                                Command="ScrollBar.PageDownCommand"
                                                Opacity="0" />
                                        </Track.IncreaseRepeatButton>
                                    </Track>
                                </Grid>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Trigger>
                <!--  Horizontal Scrollbar  -->
                <Trigger Property="Orientation" Value="Horizontal">
                    <Setter Property="Height" Value="0" />
                    <Setter Property="Visibility" Value="Collapsed" />
                    <Setter Property="IsEnabled" Value="False" />
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type ScrollBar}">
                                <!--  Completely empty template to hide horizontal scrollbar  -->
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!--  Enhanced filter scrollbar style with live dragging support  -->
        <Style
            x:Key="FilterScrollBarStyle"
            BasedOn="{StaticResource {x:Type ScrollBar}}"
            TargetType="{x:Type ScrollBar}">
            <!--  Use default WPF scrollbar with system colors and live dragging  -->
            <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" />
            <Style.Triggers>
                <!--  Hide horizontal scrollbars entirely inside the filter panel  -->
                <Trigger Property="Orientation" Value="Horizontal">
                    <Setter Property="Height" Value="0" />
                    <Setter Property="Visibility" Value="Collapsed" />
                </Trigger>
            </Style.Triggers>
        </Style>

        <!--  Simple DataGrid scrollbar style - uses default WPF scrollbar with dark theme colors  -->
        <Style
            x:Key="DataGridScrollBarStyle"
            BasedOn="{StaticResource {x:Type ScrollBar}}"
            TargetType="{x:Type ScrollBar}">
            <!--  Dark theme colors for better visibility  -->
            <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" />
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" />
            <Style.Triggers>
                <!--  Hide horizontal scrollbars  -->
                <Trigger Property="Orientation" Value="Horizontal">
                    <Setter Property="Height" Value="0" />
                    <Setter Property="Visibility" Value="Collapsed" />
                </Trigger>
            </Style.Triggers>
        </Style>

        <!--  DataGrid Row Style for Dark Theme  -->
        <Style TargetType="{x:Type DataGridRow}">
            <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.WindowBrushKey}}" />
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.WindowTextBrushKey}}" />
            <Setter Property="BorderThickness" Value="0" />
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" />
                </Trigger>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}" />
                    <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}" />
                </Trigger>
            </Style.Triggers>
        </Style>

        <!--  DataGrid Cell Style for Dark Theme  -->
        <Style TargetType="{x:Type DataGridCell}">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.WindowTextBrushKey}}" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="FocusVisualStyle" Value="{x:Null}" />
            <Setter Property="Padding" Value="0" />
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="Transparent" />
                    <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}" />
                </Trigger>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="Transparent" />
                </Trigger>
            </Style.Triggers>
        </Style>

        <!--  DataGrid Style for Dark Theme with Rounded Corners  -->
        <Style TargetType="{x:Type DataGrid}">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" />
            <Setter Property="BorderBrush" Value="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Padding" Value="3" />
        </Style>

        <!--  DataGrid Row Style with Left Status Line  -->
        <Style x:Key="RoundedDataGridRowStyle" TargetType="{x:Type DataGridRow}">
            <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.WindowBrushKey}}" />
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.WindowTextBrushKey}}" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type DataGridRow}">
                        <Grid SnapsToDevicePixels="True">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="8" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <!--  Left Status Line  -->
                            <Border
                                Grid.Column="0"
                                Width="4"
                                Margin="2,3,0,3"
                                HorizontalAlignment="Left"
                                Background="{Binding StatusColor, Converter={x:Static local:ColorToBrushConverter.Instance}}"
                                CornerRadius="2" />
                            <!--  Main Row Content  -->
                            <Border
                                Grid.Column="1"
                                Background="{TemplateBinding Background}"
                                ClipToBounds="False">
                                <SelectiveScrollingGrid>
                                    <SelectiveScrollingGrid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="*" />
                                    </SelectiveScrollingGrid.ColumnDefinitions>
                                    <SelectiveScrollingGrid.RowDefinitions>
                                        <RowDefinition Height="*" />
                                        <RowDefinition Height="Auto" />
                                    </SelectiveScrollingGrid.RowDefinitions>
                                    <DataGridRowHeader SelectiveScrollingGrid.SelectiveScrollingOrientation="Vertical" Visibility="Collapsed" />
                                    <DataGridCellsPresenter Grid.Column="1" ItemsPanel="{TemplateBinding ItemsPanel}" />
                                    <DataGridDetailsPresenter
                                        Grid.Row="1"
                                        Grid.Column="1"
                                        Visibility="{TemplateBinding DetailsVisibility}" />
                                </SelectiveScrollingGrid>
                            </Border>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" />
                </Trigger>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}" />
                    <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}" />
                </Trigger>
            </Style.Triggers>
        </Style>

        <!--  Dependency DataGrid Row Style (Tighter spacing, smaller height)  -->
        <Style x:Key="DependencyDataGridRowStyle" TargetType="{x:Type DataGridRow}">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type DataGridRow}">
                        <Grid SnapsToDevicePixels="True">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="6" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <!--  Left Status Line  -->
                            <Border
                                Grid.Column="0"
                                Width="4"
                                Margin="2,2,0,2"
                                HorizontalAlignment="Left"
                                Background="{Binding StatusColor, Converter={x:Static local:ColorToBrushConverter.Instance}}"
                                CornerRadius="2" />
                            <!--  Main Row Content  -->
                            <Border
                                Grid.Column="1"
                                Padding="0"
                                Background="{TemplateBinding Background}">
                                <DataGridCellsPresenter ItemsPanel="{TemplateBinding ItemsPanel}" />
                            </Border>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" />
                </Trigger>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}" />
                    <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}" />
                </Trigger>
            </Style.Triggers>
        </Style>

        <!--  Global ListBox Style - fix borders and disable horizontal scrollbars  -->
        <Style TargetType="{x:Type ListBox}">
            <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled" />
            <Setter Property="BorderBrush" Value="{DynamicResource {x:Static SystemColors.ControlDarkBrushKey}}" />
            <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.WindowBrushKey}}" />
        </Style>

        <!--  Filter ListBox Style: force-disable horizontal scrollbars via template  -->
        <Style x:Key="FilterListBoxStyle" TargetType="{x:Type ListBox}">
            <!--  Add proper dark theme colors  -->
            <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.WindowBrushKey}}" />
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.WindowTextBrushKey}}" />
            <Setter Property="BorderBrush" Value="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListBox">
                        <Border
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">
                            <ScrollViewer
                                x:Name="ScrollViewer"
                                CanContentScroll="True"
                                Focusable="false"
                                HorizontalScrollBarVisibility="Disabled"
                                IsDeferredScrollingEnabled="False"
                                VerticalScrollBarVisibility="Auto">
                                <ScrollViewer.Template>
                                    <ControlTemplate TargetType="ScrollViewer">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="Auto" />
                                            </Grid.ColumnDefinitions>
                                            <!--  Content presenter (no horizontal bar defined)  -->
                                            <ScrollContentPresenter
                                                Grid.Column="0"
                                                Margin="0,0,0,0"
                                                CanContentScroll="{TemplateBinding CanContentScroll}"
                                                Content="{TemplateBinding Content}"
                                                ContentTemplate="{TemplateBinding ContentTemplate}"
                                                SnapsToDevicePixels="True" />
                                            <!--  Only vertical scrollbar  -->
                                            <ScrollBar
                                                x:Name="PART_VerticalScrollBar"
                                                Grid.Column="1"
                                                Maximum="{TemplateBinding ScrollableHeight}"
                                                Orientation="Vertical"
                                                Style="{StaticResource FilterScrollBarStyle}"
                                                ViewportSize="{TemplateBinding ViewportHeight}"
                                                Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"
                                                Value="{TemplateBinding VerticalOffset}" />
                                        </Grid>
                                    </ControlTemplate>
                                </ScrollViewer.Template>
                                <ItemsPresenter />
                            </ScrollViewer>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <!--  CRITICAL: Constrain item content to ListBox width so TextBlock can wrap  -->
            <Setter Property="HorizontalContentAlignment" Value="Stretch" />
            <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled" />
            <Setter Property="SnapsToDevicePixels" Value="True" />
        </Style>

        <!--  Dark Separator Style for Menu Bar  -->
        <Style x:Key="DarkMenuSeparatorStyle" TargetType="{x:Type Separator}">
            <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}" />
            <Setter Property="Height" Value="1" />
            <Setter Property="VerticalAlignment" Value="Center" />
        </Style>

        <!--  Shared Filter ListBoxItem Style  -->
        <Style x:Key="FilterListBoxItemStyle" TargetType="ListBoxItem">
            <Setter Property="Padding" Value="6" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListBoxItem">
                        <Border Padding="{TemplateBinding Padding}" Background="{TemplateBinding Background}">
                            <TextBlock
                                Margin="6,0,0,0"
                                Text="{Binding}"
                                TextTrimming="CharacterEllipsis"
                                TextWrapping="Wrap" />
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}" />
                    <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}" />
                    <Setter Property="FontWeight" Value="Bold" />
                </Trigger>
                <Trigger Property="IsKeyboardFocused" Value="True">
                    <Setter Property="BorderBrush" Value="{StaticResource FocusBorderBrush}" />
                    <Setter Property="BorderThickness" Value="1" />
                </Trigger>
            </Style.Triggers>
        </Style>

        <!--  Shared Launch Button Style  -->
        <Style x:Key="LaunchButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="{DynamicResource ButtonBackgroundBrush}" />
            <Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
            <Setter Property="BorderBrush" Value="{DynamicResource ControlBorderBrush}" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Padding" Value="8,4" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border
                            Padding="{TemplateBinding Padding}"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="4">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{DynamicResource ButtonHoverBrush}" />
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="{DynamicResource ButtonHoverBrush}" />
                </Trigger>
                <Trigger Property="Visibility" Value="Visible">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation
                                    Storyboard.TargetProperty="Opacity"
                                    From="0.0"
                                    To="1.0"
                                    Duration="0:0:0.15">
                                    <DoubleAnimation.EasingFunction>
                                        <QuadraticEase EasingMode="EaseOut" />
                                    </DoubleAnimation.EasingFunction>
                                </DoubleAnimation>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!--  Custom ScrollViewer with left-side scrollbar  -->
        <Style x:Key="LeftScrollViewerStyle" TargetType="{x:Type ScrollViewer}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ScrollViewer}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="12" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <ScrollBar
                                x:Name="PART_VerticalScrollBar"
                                Grid.Column="0"
                                HorizontalAlignment="Left"
                                Maximum="{TemplateBinding ScrollableHeight}"
                                Orientation="Vertical"
                                Style="{StaticResource FilterScrollBarStyle}"
                                ViewportSize="{TemplateBinding ViewportHeight}"
                                Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"
                                Value="{TemplateBinding VerticalOffset}" />
                            <ScrollContentPresenter
                                Grid.Column="1"
                                Margin="{TemplateBinding Padding}"
                                CanContentScroll="{TemplateBinding CanContentScroll}"
                                Content="{TemplateBinding Content}"
                                ContentTemplate="{TemplateBinding ContentTemplate}" />
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!--  Title Bar Button Style  -->
        <Style x:Key="TitleBarButtonStyle" TargetType="{x:Type Button}">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.MenuTextBrushKey}}" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="FontSize" Value="10" />
            <Setter Property="FontFamily" Value="Segoe MDL2 Assets" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Border
                            Background="{TemplateBinding Background}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="4">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlDarkBrushKey}}" />
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlDarkDarkBrushKey}}" />
                </Trigger>
            </Style.Triggers>
        </Style>

        <!--  Title Bar Close Button Style (Red on Hover)  -->
        <Style
            x:Key="TitleBarCloseButtonStyle"
            BasedOn="{StaticResource TitleBarButtonStyle}"
            TargetType="{x:Type Button}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Border
                            Background="{TemplateBinding Background}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="4">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#E81123" />
                    <Setter Property="Foreground" Value="White" />
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#C50F1F" />
                    <Setter Property="Foreground" Value="White" />
                </Trigger>
            </Style.Triggers>
        </Style>

        <!--  Menu Style to remove border  -->
        <Style TargetType="Menu">
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="BorderBrush" Value="Transparent" />
        </Style>

        <!--  MenuItem Style for vertical centering - inherits from DarkThemeMenuItemStyle  -->
        <Style BasedOn="{StaticResource DarkThemeMenuItemStyle}" TargetType="MenuItem">
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="Height" Value="32" />
        </Style>

        <!--  MenuButton Style - Top level menu button  -->
        <Style
            x:Key="MenuButtonStyle"
            BasedOn="{StaticResource DarkThemeMenuItemStyle}"
            TargetType="MenuItem">
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="Height" Value="32" />
        </Style>
    </Window.Resources>

    <DockPanel>
        <!--  Custom Title Bar with Menu  -->
        <DockPanel
            Height="32"
            Background="{DynamicResource {x:Static SystemColors.MenuBarBrushKey}}"
            DockPanel.Dock="Top">
            <!--  Window Controls (Minimize, Maximize, Close)  -->
            <StackPanel
                shell:WindowChrome.IsHitTestVisibleInChrome="True"
                DockPanel.Dock="Right"
                Orientation="Horizontal">
                <Button
                    Width="46"
                    Height="32"
                    Click="MinimizeWindow_Click"
                    Content="â”€"
                    Style="{StaticResource TitleBarButtonStyle}"
                    ToolTip="Minimize" />
                <Button
                    x:Name="MaximizeRestoreButton"
                    Width="46"
                    Height="32"
                    Click="MaximizeRestoreWindow_Click"
                    Content="â–¡"
                    Style="{StaticResource TitleBarButtonStyle}"
                    ToolTip="Maximize" />
                <Button
                    Width="46"
                    Height="32"
                    Click="CloseWindow_Click"
                    Content="âœ•"
                    Style="{StaticResource TitleBarCloseButtonStyle}"
                    ToolTip="Close" />
            </StackPanel>

            <!--  Launch Buttons  -->
            <StackPanel
                Margin="6,0,0,0"
                shell:WindowChrome.IsHitTestVisibleInChrome="True"
                DockPanel.Dock="Right"
                Orientation="Horizontal">
                <!--  Single Play Button (shown by default)  -->
                <!--  Desktop Button (hidden by default)  -->
                <Button
                    x:Name="DesktopButton"
                    Margin="0,0,3,0"
                    Click="LaunchDesktop_Click"
                    Content="ðŸ–¥ï¸ Desktop"
                    Style="{StaticResource LaunchButtonStyle}"
                    ToolTip="Launch VirtAMate in Desktop mode"
                    Visibility="Collapsed" />

                <!--  Config Button (hidden by default)  -->
                <Button
                    x:Name="ConfigButton"
                    Margin="0,0,3,0"
                    Click="LaunchConfig_Click"
                    Content="âš™ï¸ Custom"
                    Style="{StaticResource LaunchButtonStyle}"
                    ToolTip="Launch VirtAMate with screen selector"
                    Visibility="Collapsed" />

                <!--  Cancel Button (hidden by default)  -->
                <Button
                    x:Name="CancelPlayButton"
                    Click="CancelPlay_Click"
                    Content="âœ• Cancel"
                    Style="{StaticResource LaunchButtonStyle}"
                    ToolTip="Cancel and return to main buttons"
                    Visibility="Collapsed" />
            </StackPanel>

            <!--  Menu Button on Left (App Title + Menu)  -->
            <Menu
                Height="32"
                Padding="0"
                VerticalAlignment="Center"
                shell:WindowChrome.IsHitTestVisibleInChrome="True"
                Background="Transparent"
                DockPanel.Dock="Left">
                <MenuItem
                    x:Name="MenuButton"
                    Header="â˜° VPM v1.0.0"
                    Style="{StaticResource MenuButtonStyle}">
                    <!--  File Operations Section  -->
                    <MenuItem Header="ðŸ“‹ _File Operations">
                        <MenuItem Click="SelectRootFolder_Click" Header="_Select Root Folder...">
                            <MenuItem.Icon>
                                <TextBlock FontSize="12" Text="ðŸ“" />
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem Click="RefreshPackages_Click" Header="_Refresh Packages">
                            <MenuItem.Icon>
                                <TextBlock FontSize="12" Text="ðŸ”„" />
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem Click="ArchiveOldVersions_Click" Header="_Archive Old Versions...">
                            <MenuItem.Icon>
                                <TextBlock FontSize="12" Text="ðŸ“¦" />
                            </MenuItem.Icon>
                        </MenuItem>
                    </MenuItem>

                    <!--  Display Settings Section  -->
                    <Separator />
                    <MenuItem Header="ðŸŽ¨ _Display Settings">
                        <MenuItem Header="_Theme">
                            <MenuItem
                                x:Name="DarkThemeMenuItem"
                                Click="SetTheme_Click"
                                Header="ðŸŒ™ _Dark Theme"
                                IsChecked="True"
                                Tag="Dark" />
                            <MenuItem
                                x:Name="LightThemeMenuItem"
                                Click="SetTheme_Click"
                                Header="â˜€ï¸ _Light Theme"
                                Tag="Light" />
                            <MenuItem
                                x:Name="SystemThemeMenuItem"
                                Click="SetTheme_Click"
                                Header="ðŸ–¥ï¸ _System Theme"
                                Tag="System" />
                        </MenuItem>
                        <MenuItem Header="ðŸ“¦ _Hide Archived Packages">
                            <MenuItem
                                x:Name="HideArchivedEnabledMenuItem"
                                Click="SetHideArchivedPackages_Click"
                                Header="Enabled (default)"
                                Tag="True">
                                <MenuItem.Icon>
                                    <Border Width="0" />
                                </MenuItem.Icon>
                            </MenuItem>
                            <MenuItem
                                x:Name="HideArchivedDisabledMenuItem"
                                Click="SetHideArchivedPackages_Click"
                                Header="Disabled"
                                Tag="False">
                                <MenuItem.Icon>
                                    <Border Width="0" />
                                </MenuItem.Icon>
                            </MenuItem>
                        </MenuItem>
                    </MenuItem>

                    <!--  Cache & Storage Section  -->
                    <Separator />
                    <MenuItem Header="ðŸ’¾ _Cache &amp; Storage">
                        <MenuItem Click="OpenCacheFolder_Click" Header="ðŸ“‚ Open Cache _Folder..." />
                        <MenuItem Click="ClearAllMetadataCache_Click" Header="ðŸ—‘ï¸ Clear All _Metadata Cache" />
                    </MenuItem>

                    <!--  Package Settings Section  -->
                    <Separator />
                    <MenuItem Header="ðŸ“¦ _Package Settings">
                        <MenuItem Click="ConfigureFileSizeRanges_Click" Header="ðŸ“¦ _File Size Ranges..." />
                        <MenuItem Header="ðŸ“Š _Preview Selection Limit">
                            <MenuItem
                                Click="SetMaxSafeSelection_Click"
                                Header="100 packages"
                                Tag="100" />
                            <MenuItem
                                Click="SetMaxSafeSelection_Click"
                                Header="200 packages (default)"
                                Tag="200" />
                            <MenuItem
                                Click="SetMaxSafeSelection_Click"
                                Header="500 packages"
                                Tag="500" />
                            <MenuItem
                                Click="SetMaxSafeSelection_Click"
                                Header="1000 packages"
                                Tag="1000" />
                        </MenuItem>
                    </MenuItem>

                    <!--  Tools Section  -->
                    <Separator />
                    <MenuItem Header="ðŸ› ï¸ _Tools">
                        <MenuItem
                            x:Name="PackageDownloadsToolbarButton"
                            Click="PackageDownloadsToolbar_Click"
                            Header="ðŸ“¥ Package Downloads"
                            ToolTip="Search and download missing packages" />
                        <MenuItem
                            x:Name="CheckUpdatesToolbarButton"
                            Click="CheckUpdatesToolbar_Click"
                            Header="ðŸ“¡ Check for Updates"
                            ToolTip="Check for package updates" />
                        <MenuItem
                            x:Name="DownloadMissingToolbarButton"
                            Click="DownloadMissingToolbar_Click"
                            Header="ðŸ“¥ Download Missing"
                            ToolTip="Download missing dependencies"
                            Visibility="Collapsed" />
                    </MenuItem>

                    <!--  Help Section  -->
                    <Separator />
                    <MenuItem Header="â“ _Help">
                        <MenuItem Click="KeyboardShortcuts_Click" Header="âŒ¨ï¸ _Keyboard Shortcuts" />
                        <MenuItem Click="About_Click" Header="_About VPM" />
                    </MenuItem>

                    <!--  Exit at Bottom  -->
                    <Separator />
                    <MenuItem Click="Exit_Click" Header="E_xit" />
                </MenuItem>
            </Menu>

            <!--  Status Text (in same row as menu)  -->
            <TextBlock
                x:Name="StatusText"
                Margin="12,0,12,0"
                VerticalAlignment="Center"
                DockPanel.Dock="Left"
                FontSize="14"
                FontWeight="SemiBold"
                Foreground="{DynamicResource {x:Static SystemColors.MenuTextBrushKey}}"
                Text="Ready" />

            <!--  Draggable Title Area (fills remaining space)  -->
            <Border
                shell:WindowChrome.IsHitTestVisibleInChrome="False"
                Background="Transparent"
                Cursor="Hand"
                DockPanel.Dock="Left"
                MouseLeftButtonDown="TitleBar_MouseLeftButtonDown" />
        </DockPanel>

        <!--  Main Content  -->
        <Grid Margin="3">
            <Grid.ColumnDefinitions>
                <!--  Left Panel: Filters  -->
                <ColumnDefinition
                    x:Name="LeftPanelColumn"
                    Width="0.75*"
                    MinWidth="150" />
                <ColumnDefinition Width="5" />
                <!--  Main Table: Largest panel  -->
                <ColumnDefinition
                    x:Name="CenterPanelColumn"
                    Width="1.52*"
                    MinWidth="300" />
                <ColumnDefinition Width="5" />
                <!--  Dependencies Panel  -->
                <ColumnDefinition
                    x:Name="RightPanelColumn"
                    Width="1.3*"
                    MinWidth="200" />
                <ColumnDefinition Width="5" />
                <!--  Images Panel  -->
                <ColumnDefinition
                    x:Name="ImagesPanelColumn"
                    Width="1.48*"
                    MinWidth="150" />
            </Grid.ColumnDefinitions>

            <!--  Left Panel - Filters  -->
            <Border
                Grid.Column="0"
                Padding="0"
                Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"
                BorderBrush="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}"
                BorderThickness="1"
                CornerRadius="{StaticResource CornerRadiusValue}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <!--  Static Button Area at Top  -->
                    <Grid
                        Grid.Row="0"
                        Margin="6,6,6,6"
                        PreviewMouseWheel="FilterArea_PreviewMouseWheel">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <!--  Content Mode Switch Dropdown  -->
                        <ComboBox
                            x:Name="ContentModeDropdown"
                            Grid.Column="0"
                            Height="{StaticResource LinkedButtonHeight}"
                            Margin="0,0,6,0"
                            Padding="6,6"
                            HorizontalAlignment="Stretch"
                            VerticalContentAlignment="Center"
                            Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"
                            BorderBrush="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}"
                            BorderThickness="1"
                            Foreground="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"
                            PreviewMouseRightButtonDown="ContentModeDropdown_PreviewMouseRightButtonDown"
                            SelectionChanged="ContentModeDropdown_SelectionChanged"
                            ToolTip="Left-click: Open dropdown | Right-click: Cycle to next mode">
                            <ComboBox.Template>
                                <ControlTemplate TargetType="ComboBox">
                                    <Grid>
                                        <ToggleButton
                                            Name="ToggleButton"
                                            Grid.Column="0"
                                            Grid.ColumnSpan="2"
                                            Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"
                                            BorderBrush="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}"
                                            BorderThickness="1"
                                            ClickMode="Press"
                                            Focusable="false"
                                            Foreground="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"
                                            IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}">
                                            <ToggleButton.Template>
                                                <ControlTemplate TargetType="ToggleButton">
                                                    <Border
                                                        Padding="{TemplateBinding Padding}"
                                                        Background="{TemplateBinding Background}"
                                                        BorderBrush="{TemplateBinding BorderBrush}"
                                                        BorderThickness="{TemplateBinding BorderThickness}"
                                                        CornerRadius="4">
                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                    </Border>
                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter Property="BorderBrush" Value="{StaticResource AccentBrush}" />
                                                            <Setter Property="BorderThickness" Value="1" />
                                                        </Trigger>
                                                        <Trigger Property="IsPressed" Value="True">
                                                            <Setter Property="Background" Value="{StaticResource AccentPressedBrush}" />
                                                            <Setter Property="Foreground" Value="White" />
                                                        </Trigger>
                                                        <Trigger Property="IsChecked" Value="True">
                                                            <Setter Property="BorderBrush" Value="{StaticResource AccentBrush}" />
                                                            <Setter Property="BorderThickness" Value="1" />
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </ToggleButton.Template>
                                            <StackPanel
                                                HorizontalAlignment="Center"
                                                VerticalAlignment="Center"
                                                Orientation="Horizontal">
                                                <TextBlock
                                                    VerticalAlignment="Center"
                                                    Foreground="{TemplateBinding Foreground}"
                                                    Text="Mode" />
                                                <TextBlock
                                                    Margin="6,0,0,0"
                                                    VerticalAlignment="Center"
                                                    FontSize="10"
                                                    Foreground="{TemplateBinding Foreground}"
                                                    Text="â–¼" />
                                            </StackPanel>
                                        </ToggleButton>
                                        <ContentPresenter
                                            Name="ContentPresenter"
                                            Margin="3,3,23,3"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Center"
                                            Content="{TemplateBinding SelectionBoxItem}"
                                            ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                            ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                                            IsHitTestVisible="false"
                                            Visibility="Collapsed" />
                                        <Popup
                                            Name="Popup"
                                            AllowsTransparency="True"
                                            Focusable="False"
                                            IsOpen="{TemplateBinding IsDropDownOpen}"
                                            Placement="Bottom"
                                            PopupAnimation="Slide">
                                            <Grid
                                                Name="DropDown"
                                                MinWidth="{TemplateBinding ActualWidth}"
                                                MaxHeight="{TemplateBinding MaxDropDownHeight}"
                                                SnapsToDevicePixels="True">
                                                <Border
                                                    x:Name="DropDownBorder"
                                                    Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"
                                                    BorderBrush="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}"
                                                    BorderThickness="1"
                                                    CornerRadius="4">
                                                    <ScrollViewer SnapsToDevicePixels="True">
                                                        <ItemsPresenter KeyboardNavigation.DirectionalNavigation="Contained" />
                                                    </ScrollViewer>
                                                </Border>
                                            </Grid>
                                        </Popup>
                                    </Grid>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="HasItems" Value="false">
                                            <Setter TargetName="DropDownBorder" Property="MinHeight" Value="95" />
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </ComboBox.Template>
                            <ComboBoxItem Content="ðŸ“¦ Packages" />
                            <ComboBoxItem Content="ðŸŽ¨ Custom" />
                        </ComboBox>

                        <!--  Linked Filters Button (Icon + Status)  -->
                        <Button
                            x:Name="LinkedFiltersButton"
                            Grid.Column="1"
                            Height="{StaticResource LinkedButtonHeight}"
                            Margin="0,0,6,0"
                            Padding="6,6"
                            Click="ToggleLinkedFilters_Click"
                            Style="{StaticResource BlueHoverButtonStyle}"
                            ToolTip="On: Multiple selections, all options visible Off: Single selection, hide incompatible options">
                            <StackPanel VerticalAlignment="Center" Orientation="Horizontal">
                                <TextBlock
                                    VerticalAlignment="Center"
                                    FontSize="15"
                                    Text="ðŸ“¦ " />
                                <TextBlock
                                    x:Name="LinkedStatusText"
                                    VerticalAlignment="Center"
                                    Text="Off" />
                            </StackPanel>
                        </Button>

                        <!--  Refresh Button  -->
                        <Button
                            x:Name="RefreshPackagesButton"
                            Grid.Column="2"
                            Width="{StaticResource LinkedButtonHeight}"
                            Height="{StaticResource LinkedButtonHeight}"
                            Margin="0,0,0,0"
                            Padding="0"
                            Click="RefreshPackagesButton_Click"
                            Content="ðŸ”„"
                            FontSize="15"
                            Style="{StaticResource BlueHoverButtonStyle}"
                            ToolTip="Refresh package list" />
                    </Grid>

                    <!--  Scrollable Filter Area  -->
                    <ScrollViewer
                        x:Name="FilterScrollViewer"
                        Grid.Row="1"
                        Padding="0"
                        HorizontalScrollBarVisibility="Disabled"
                        PanningMode="VerticalOnly"
                        VerticalScrollBarVisibility="Hidden">
                        <StackPanel x:Name="FilterGrid" Margin="9,0,9,9">

                            <!--  Package Filters Container (Hidden in Scene Mode)  -->
                            <StackPanel x:Name="PackageFiltersContainer">

                                <!--  Date Filter Section  -->
                                <StackPanel Margin="0,6,0,0">
                                    <!--  Collapsed state (shown when hidden)  -->
                                    <Grid
                                        x:Name="DateFilterCollapsedGrid"
                                        Margin="0,0,0,6"
                                        Visibility="Collapsed">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="DateFilterToggleButtonCollapsed"
                                            Grid.Column="0"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘ï¸â€ðŸ—¨ï¸"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="DateFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <Label Grid.Column="1" Content="ðŸ“… Filter by Date" />
                                        <Button
                                            x:Name="DateFilterMoveUpButton"
                                            Grid.Column="2"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="3,0,3,0"
                                            Padding="0"
                                            Click="FilterMoveUp_Click"
                                            Content="â–²"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="DateFilter"
                                            ToolTip="Move filter up" />
                                        <Button
                                            x:Name="DateFilterMoveDownButton"
                                            Grid.Column="3"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,0,0"
                                            Padding="0"
                                            Click="FilterMoveDown_Click"
                                            Content="â–¼"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="DateFilter"
                                            ToolTip="Move filter down" />
                                    </Grid>

                                    <!--  Expanded state (shown when visible)  -->
                                    <Grid x:Name="DateFilterExpandedGrid" Margin="0,0,0,6">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="DateFilterToggleButton"
                                            Grid.Column="0"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="DateFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <Label Grid.Column="1" Content="ðŸ“… Filter by Date" />
                                    </Grid>

                                    <ListBox
                                        x:Name="DateFilterList"
                                        Height="{Binding DateFilterHeight, Mode=TwoWay}"
                                        MinHeight="60"
                                        MaxHeight="200"
                                        BorderThickness="1"
                                        ScrollViewer.CanContentScroll="True"
                                        ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                        ScrollViewer.IsDeferredScrollingEnabled="True"
                                        SelectionChanged="DateFilterList_SelectionChanged"
                                        SelectionMode="Single"
                                        Style="{StaticResource FilterListBoxStyle}"
                                        VirtualizingStackPanel.IsVirtualizing="True"
                                        VirtualizingStackPanel.VirtualizationMode="Recycling">
                                        <ListBox.ItemContainerStyle>
                                            <StaticResource ResourceKey="FilterListBoxItemStyle" />
                                        </ListBox.ItemContainerStyle>
                                        <!--  Date filter items will be populated dynamically with package counts  -->
                                    </ListBox>

                                    <!--  Custom Date Range Panel (Initially Hidden)  -->
                                    <StackPanel
                                        x:Name="CustomDateRangePanel"
                                        Margin="0,6,0,0"
                                        Visibility="Collapsed">
                                        <Label
                                            Margin="0,6,0,3"
                                            Content="From:"
                                            FontSize="12" />
                                        <DatePicker
                                            x:Name="StartDatePicker"
                                            Margin="0,0,0,6"
                                            SelectedDateChanged="CustomDateRange_Changed" />
                                        <Label
                                            Margin="0,6,0,3"
                                            Content="To:"
                                            FontSize="12" />
                                        <DatePicker
                                            x:Name="EndDatePicker"
                                            Margin="0,0,0,6"
                                            SelectedDateChanged="CustomDateRange_Changed" />
                                        <Button
                                            x:Name="ApplyCustomDateButton"
                                            Margin="0,6,0,0"
                                            Padding="9,3"
                                            Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"
                                            BorderBrush="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}"
                                            BorderThickness="1"
                                            Click="ApplyCustomDateRange_Click"
                                            Content="Apply Range" />
                                    </StackPanel>
                                </StackPanel>

                                <!--  Status Filter Section  -->
                                <StackPanel Margin="0,6,0,0">
                                    <!--  Collapsed state (shown when hidden)  -->
                                    <Grid
                                        x:Name="StatusFilterCollapsedGrid"
                                        Margin="0,0,0,6"
                                        Visibility="Collapsed">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="StatusFilterToggleButton"
                                            Grid.Column="0"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘ï¸â€ðŸ—¨ï¸"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="StatusFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <Label Grid.Column="1" Content="ðŸ“Š Filter by Status" />
                                        <Button
                                            x:Name="StatusFilterMoveUpButton"
                                            Grid.Column="2"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="3,0,3,0"
                                            Padding="0"
                                            Click="FilterMoveUp_Click"
                                            Content="â–²"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="StatusFilter"
                                            ToolTip="Move filter up" />
                                        <Button
                                            x:Name="StatusFilterMoveDownButton"
                                            Grid.Column="3"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,0,0"
                                            Padding="0"
                                            Click="FilterMoveDown_Click"
                                            Content="â–¼"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="StatusFilter"
                                            ToolTip="Move filter down" />
                                    </Grid>

                                    <!--  Expanded state (shown when visible)  -->
                                    <Grid x:Name="StatusFilterExpandedGrid" Margin="0,0,0,6">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="StatusFilterToggleButtonExpanded"
                                            Grid.Column="0"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="StatusFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <Label Grid.Column="1" Content="ðŸ“Š Filter by Status" />
                                        <Button
                                            x:Name="StatusSortButton"
                                            Grid.Column="2"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Padding="0"
                                            Click="StatusSortButton_Click"
                                            Content="â‡…"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            ToolTip="Sort status filters alphabetically" />
                                    </Grid>

                                    <ListBox
                                        x:Name="StatusFilterList"
                                        Height="{Binding StatusFilterHeight, Mode=TwoWay}"
                                        MinHeight="80"
                                        MaxHeight="200"
                                        BorderThickness="1"
                                        MouseLeftButtonDown="FilterList_MouseLeftButtonDown"
                                        ScrollViewer.CanContentScroll="True"
                                        ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                        ScrollViewer.IsDeferredScrollingEnabled="True"
                                        SelectionChanged="StatusFilterList_SelectionChanged"
                                        SelectionMode="Multiple"
                                        Style="{StaticResource FilterListBoxStyle}"
                                        VirtualizingStackPanel.IsVirtualizing="True"
                                        VirtualizingStackPanel.VirtualizationMode="Recycling">
                                        <ListBox.ItemContainerStyle>
                                            <StaticResource ResourceKey="FilterListBoxItemStyle" />
                                        </ListBox.ItemContainerStyle>
                                        <!--  Status items will be populated dynamically  -->
                                    </ListBox>
                                </StackPanel>

                                <!--  Content Types Filter Section  -->
                                <StackPanel Margin="0,6,0,0">
                                    <!--  Collapsed state label (shown when hidden)  -->
                                    <Grid
                                        x:Name="ContentTypesFilterCollapsedGrid"
                                        Margin="0,0,0,6"
                                        Visibility="Collapsed">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="ContentTypesFilterToggleButton"
                                            Grid.Column="0"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘ï¸â€ðŸ—¨ï¸"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="ContentTypesFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <Label Grid.Column="1" Content="ðŸ“¦ Filter content types" />
                                        <Button
                                            x:Name="ContentTypesFilterMoveUpButton"
                                            Grid.Column="2"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="3,0,3,0"
                                            Padding="0"
                                            Click="FilterMoveUp_Click"
                                            Content="â–²"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="ContentTypesFilter"
                                            ToolTip="Move filter up" />
                                        <Button
                                            x:Name="ContentTypesFilterMoveDownButton"
                                            Grid.Column="3"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,0,0"
                                            Padding="0"
                                            Click="FilterMoveDown_Click"
                                            Content="â–¼"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="ContentTypesFilter"
                                            ToolTip="Move filter down" />
                                    </Grid>

                                    <!--  TextBox Grid with eye button (shown when expanded)  -->
                                    <Grid x:Name="ContentTypesFilterTextBoxGrid" Margin="0,0,0,6">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" MinWidth="110" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="ContentTypesFilterToggleButtonExpanded"
                                            Grid.Column="0"
                                            Width="27"
                                            Height="{Binding ElementName=ContentTypesFilterBox, Path=ActualHeight}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="ContentTypesFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <TextBox
                                            x:Name="ContentTypesFilterBox"
                                            Grid.Column="1"
                                            MinWidth="110"
                                            Padding="5"
                                            Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                            GotFocus="FilterTextBox_GotFocus"
                                            LostFocus="FilterTextBox_LostFocus"
                                            Text="ðŸ“¦ Filter content types..."
                                            TextChanged="ContentTypesFilterBox_TextChanged" />
                                        <Button
                                            x:Name="ContentTypesClearButton"
                                            Grid.Column="2"
                                            Width="27"
                                            Height="{Binding ElementName=ContentTypesFilterBox, Path=ActualHeight}"
                                            Margin="3,0,0,0"
                                            Padding="3,0"
                                            Click="ClearFilterButton_Click"
                                            Content="âœ•"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            ToolTip="Clear filter"
                                            Visibility="Collapsed" />
                                        <Button
                                            x:Name="ContentTypesSortButton"
                                            Grid.Column="3"
                                            Width="27"
                                            Height="{Binding ElementName=ContentTypesFilterBox, Path=ActualHeight}"
                                            Margin="3,0,0,0"
                                            Padding="0"
                                            Click="ContentTypesSortButton_Click"
                                            Content="â‡…"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            ToolTip="Sort content types alphabetically" />
                                    </Grid>

                                    <ListBox
                                        x:Name="ContentTypesList"
                                        Height="{Binding ContentTypesFilterHeight, Mode=TwoWay}"
                                        MinHeight="120"
                                        MaxHeight="250"
                                        BorderThickness="1"
                                        MouseLeftButtonDown="FilterList_MouseLeftButtonDown"
                                        ScrollViewer.CanContentScroll="True"
                                        ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                        ScrollViewer.IsDeferredScrollingEnabled="True"
                                        SelectionChanged="ContentTypesList_SelectionChanged"
                                        SelectionMode="Multiple"
                                        Style="{StaticResource FilterListBoxStyle}"
                                        VirtualizingStackPanel.IsVirtualizing="True"
                                        VirtualizingStackPanel.VirtualizationMode="Recycling">
                                        <ListBox.ItemContainerStyle>
                                            <StaticResource ResourceKey="FilterListBoxItemStyle" />
                                        </ListBox.ItemContainerStyle>
                                        <!--  Content types will be populated dynamically  -->
                                    </ListBox>
                                </StackPanel>

                                <!--  Creators Filter Section  -->
                                <StackPanel Margin="0,6,0,0">
                                    <!--  Collapsed state label (shown when hidden)  -->
                                    <Grid
                                        x:Name="CreatorsFilterCollapsedGrid"
                                        Margin="0,0,0,6"
                                        Visibility="Collapsed">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="CreatorsFilterToggleButton"
                                            Grid.Column="0"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘ï¸â€ðŸ—¨ï¸"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="CreatorsFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <Label Grid.Column="1" Content="ðŸ‘¤ Filter creators" />
                                        <Button
                                            x:Name="CreatorsFilterMoveUpButton"
                                            Grid.Column="2"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="3,0,3,0"
                                            Padding="0"
                                            Click="FilterMoveUp_Click"
                                            Content="â–²"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="CreatorsFilter"
                                            ToolTip="Move filter up" />
                                        <Button
                                            x:Name="CreatorsFilterMoveDownButton"
                                            Grid.Column="3"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,0,0"
                                            Padding="0"
                                            Click="FilterMoveDown_Click"
                                            Content="â–¼"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="CreatorsFilter"
                                            ToolTip="Move filter down" />
                                    </Grid>

                                    <!--  TextBox Grid with eye button (shown when expanded)  -->
                                    <Grid x:Name="CreatorsFilterTextBoxGrid" Margin="0,0,0,6">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" MinWidth="110" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="CreatorsFilterToggleButtonExpanded"
                                            Grid.Column="0"
                                            Width="27"
                                            Height="{Binding ElementName=CreatorsFilterBox, Path=ActualHeight}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="CreatorsFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <TextBox
                                            x:Name="CreatorsFilterBox"
                                            Grid.Column="1"
                                            MinWidth="110"
                                            Padding="5"
                                            Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                            GotFocus="FilterTextBox_GotFocus"
                                            LostFocus="FilterTextBox_LostFocus"
                                            Text="ðŸ‘¤ Filter creators..."
                                            TextChanged="CreatorsFilterBox_TextChanged" />
                                        <Button
                                            x:Name="CreatorsClearButton"
                                            Grid.Column="2"
                                            Width="27"
                                            Height="{Binding ElementName=CreatorsFilterBox, Path=ActualHeight}"
                                            Margin="3,0,0,0"
                                            Padding="3,0"
                                            Click="ClearFilterButton_Click"
                                            Content="âœ•"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            ToolTip="Clear filter"
                                            Visibility="Collapsed" />
                                        <Button
                                            x:Name="CreatorsSortButton"
                                            Grid.Column="3"
                                            Width="27"
                                            Height="{Binding ElementName=CreatorsFilterBox, Path=ActualHeight}"
                                            Margin="3,0,0,0"
                                            Padding="0"
                                            Click="CreatorsSortButton_Click"
                                            Content="â‡…"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            ToolTip="Sort creators" />
                                    </Grid>

                                    <ListBox
                                        x:Name="CreatorsList"
                                        Height="{Binding CreatorsFilterHeight, Mode=TwoWay}"
                                        MinHeight="120"
                                        MaxHeight="250"
                                        BorderThickness="1"
                                        MouseLeftButtonDown="FilterList_MouseLeftButtonDown"
                                        ScrollViewer.CanContentScroll="True"
                                        ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                        ScrollViewer.IsDeferredScrollingEnabled="True"
                                        SelectionChanged="CreatorsList_SelectionChanged"
                                        SelectionMode="Multiple"
                                        Style="{StaticResource FilterListBoxStyle}"
                                        VirtualizingStackPanel.IsVirtualizing="True"
                                        VirtualizingStackPanel.VirtualizationMode="Recycling">
                                        <ListBox.ItemContainerStyle>
                                            <Style TargetType="ListBoxItem">
                                                <Setter Property="Padding" Value="3" />
                                                <Setter Property="Margin" Value="0,3,0,0" />
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="ListBoxItem">
                                                            <Border
                                                                Padding="{TemplateBinding Padding}"
                                                                Background="{TemplateBinding Background}"
                                                                CornerRadius="6">
                                                                <TextBlock
                                                                    Margin="6,0,0,0"
                                                                    Text="{Binding}"
                                                                    TextTrimming="CharacterEllipsis"
                                                                    TextWrapping="Wrap" />
                                                            </Border>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                                <Style.Triggers>
                                                    <Trigger Property="IsSelected" Value="True">
                                                        <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}" />
                                                        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}" />
                                                        <Setter Property="FontWeight" Value="Bold" />
                                                    </Trigger>
                                                    <Trigger Property="IsKeyboardFocused" Value="True">
                                                        <Setter Property="BorderBrush" Value="#FF6200EA" />
                                                        <Setter Property="BorderThickness" Value="1" />
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </ListBox.ItemContainerStyle>
                                        <!--  Creators will be populated dynamically  -->
                                    </ListBox>
                                </StackPanel>

                                <!--  Subfolders Filter Section  -->
                                <StackPanel Margin="0,6,0,0">
                                    <!--  Collapsed state (shown when hidden)  -->
                                    <Grid
                                        x:Name="SubfoldersFilterCollapsedGrid"
                                        Margin="0,0,0,6"
                                        Visibility="Collapsed">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="SubfoldersFilterToggleButton"
                                            Grid.Column="0"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘ï¸â€ðŸ—¨ï¸"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="SubfoldersFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <Label Grid.Column="1" Content="ðŸ“ Filter by subfolders" />
                                        <Button
                                            x:Name="SubfoldersFilterMoveUpButton"
                                            Grid.Column="2"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="3,0,3,0"
                                            Padding="0"
                                            Click="FilterMoveUp_Click"
                                            Content="â–²"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="SubfoldersFilter"
                                            ToolTip="Move filter up" />
                                        <Button
                                            x:Name="SubfoldersFilterMoveDownButton"
                                            Grid.Column="3"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,0,0"
                                            Padding="0"
                                            Click="FilterMoveDown_Click"
                                            Content="â–¼"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="SubfoldersFilter"
                                            ToolTip="Move filter down" />
                                    </Grid>

                                    <!--  TextBox Grid with eye button (shown when expanded)  -->
                                    <Grid x:Name="SubfoldersFilterTextBoxGrid" Margin="0,0,0,6">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" MinWidth="110" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="SubfoldersFilterToggleButtonExpanded"
                                            Grid.Column="0"
                                            Width="27"
                                            Height="{Binding ElementName=SubfoldersFilterBox, Path=ActualHeight}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="SubfoldersFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <TextBox
                                            x:Name="SubfoldersFilterBox"
                                            Grid.Column="1"
                                            MinWidth="110"
                                            Padding="5"
                                            Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                            GotFocus="FilterTextBox_GotFocus"
                                            LostFocus="FilterTextBox_LostFocus"
                                            Text="ðŸ“ Filter subfolders..."
                                            TextChanged="SubfoldersFilterBox_TextChanged" />
                                        <Button
                                            x:Name="SubfoldersClearButton"
                                            Grid.Column="2"
                                            Width="27"
                                            Height="{Binding ElementName=SubfoldersFilterBox, Path=ActualHeight}"
                                            Margin="3,0,0,0"
                                            Padding="3,0"
                                            Click="ClearFilterButton_Click"
                                            Content="âœ•"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            ToolTip="Clear filter"
                                            Visibility="Collapsed" />
                                        <Button
                                            x:Name="SubfoldersSortButton"
                                            Grid.Column="3"
                                            Width="27"
                                            Height="{Binding ElementName=SubfoldersFilterBox, Path=ActualHeight}"
                                            Margin="3,0,0,0"
                                            Padding="0"
                                            Click="SubfoldersSortButton_Click"
                                            Content="â‡…"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            ToolTip="Sort subfolders alphabetically" />
                                    </Grid>

                                    <ListBox
                                        x:Name="SubfoldersFilterList"
                                        Height="{Binding SubfoldersFilterHeight, Mode=TwoWay}"
                                        MinHeight="100"
                                        MaxHeight="200"
                                        BorderThickness="1"
                                        MouseLeftButtonDown="FilterList_MouseLeftButtonDown"
                                        ScrollViewer.CanContentScroll="True"
                                        ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                        ScrollViewer.IsDeferredScrollingEnabled="True"
                                        SelectionChanged="SubfoldersFilterList_SelectionChanged"
                                        SelectionMode="Multiple"
                                        Style="{StaticResource FilterListBoxStyle}"
                                        VirtualizingStackPanel.IsVirtualizing="True"
                                        VirtualizingStackPanel.VirtualizationMode="Recycling">
                                        <ListBox.ItemContainerStyle>
                                            <StaticResource ResourceKey="FilterListBoxItemStyle" />
                                        </ListBox.ItemContainerStyle>
                                        <!--  Subfolders will be populated dynamically  -->
                                    </ListBox>
                                </StackPanel>

                                <!--  License Type Filter Section  -->
                                <StackPanel Margin="0,6,0,0">
                                    <!--  Collapsed state label (shown when hidden)  -->
                                    <Grid
                                        x:Name="LicenseTypeFilterCollapsedGrid"
                                        Margin="0,0,0,6"
                                        Visibility="Collapsed">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="LicenseTypeFilterToggleButton"
                                            Grid.Column="0"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘ï¸â€ðŸ—¨ï¸"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="LicenseTypeFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <Label Grid.Column="1" Content="âš–ï¸ Filter license types" />
                                        <Button
                                            x:Name="LicenseTypeFilterMoveUpButton"
                                            Grid.Column="2"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="3,0,3,0"
                                            Padding="0"
                                            Click="FilterMoveUp_Click"
                                            Content="â–²"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="LicenseTypeFilter"
                                            ToolTip="Move filter up" />
                                        <Button
                                            x:Name="LicenseTypeFilterMoveDownButton"
                                            Grid.Column="3"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,0,0"
                                            Padding="0"
                                            Click="FilterMoveDown_Click"
                                            Content="â–¼"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="LicenseTypeFilter"
                                            ToolTip="Move filter down" />
                                    </Grid>

                                    <!--  TextBox Grid with eye button (shown when expanded)  -->
                                    <Grid x:Name="LicenseTypeFilterTextBoxGrid" Margin="0,0,0,6">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" MinWidth="110" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="LicenseTypeFilterToggleButtonExpanded"
                                            Grid.Column="0"
                                            Width="27"
                                            Height="{Binding ElementName=LicenseTypeFilterBox, Path=ActualHeight}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="LicenseTypeFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <TextBox
                                            x:Name="LicenseTypeFilterBox"
                                            Grid.Column="1"
                                            MinWidth="110"
                                            Padding="5"
                                            Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                            GotFocus="FilterTextBox_GotFocus"
                                            LostFocus="FilterTextBox_LostFocus"
                                            Text="âš–ï¸ Filter license types..."
                                            TextChanged="LicenseTypeFilterBox_TextChanged" />
                                        <Button
                                            x:Name="LicenseTypeClearButton"
                                            Grid.Column="2"
                                            Width="27"
                                            Height="{Binding ElementName=LicenseTypeFilterBox, Path=ActualHeight}"
                                            Margin="3,0,0,0"
                                            Padding="3,0"
                                            Click="ClearFilterButton_Click"
                                            Content="âœ•"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            ToolTip="Clear filter"
                                            Visibility="Collapsed" />
                                        <Button
                                            x:Name="LicenseTypeSortButton"
                                            Grid.Column="3"
                                            Width="27"
                                            Height="{Binding ElementName=LicenseTypeFilterBox, Path=ActualHeight}"
                                            Margin="3,0,0,0"
                                            Padding="0"
                                            Click="LicenseTypeSortButton_Click"
                                            Content="â‡…"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            ToolTip="Sort license types" />
                                    </Grid>

                                    <ListBox
                                        x:Name="LicenseTypeList"
                                        Height="{Binding LicenseTypeFilterHeight, Mode=TwoWay}"
                                        MinHeight="100"
                                        MaxHeight="200"
                                        BorderThickness="1"
                                        MouseLeftButtonDown="FilterList_MouseLeftButtonDown"
                                        ScrollViewer.CanContentScroll="True"
                                        ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                        ScrollViewer.IsDeferredScrollingEnabled="True"
                                        SelectionChanged="LicenseTypeList_SelectionChanged"
                                        SelectionMode="Multiple"
                                        Style="{StaticResource FilterListBoxStyle}"
                                        VirtualizingStackPanel.IsVirtualizing="True"
                                        VirtualizingStackPanel.VirtualizationMode="Recycling">
                                        <ListBox.ItemContainerStyle>
                                            <StaticResource ResourceKey="FilterListBoxItemStyle" />
                                        </ListBox.ItemContainerStyle>
                                        <!--  License types will be populated dynamically  -->
                                    </ListBox>
                                </StackPanel>

                                <!--  File Size Filter Section  -->
                                <StackPanel Margin="0,6,0,0">
                                    <!--  Collapsed state (shown when hidden)  -->
                                    <Grid
                                        x:Name="FileSizeFilterCollapsedGrid"
                                        Margin="0,0,0,6"
                                        Visibility="Collapsed">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="FileSizeFilterToggleButton"
                                            Grid.Column="0"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘ï¸â€ðŸ—¨ï¸"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="FileSizeFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <Label Grid.Column="1" Content="ðŸ“¦ Filter by size" />
                                        <Button
                                            x:Name="FileSizeFilterMoveUpButton"
                                            Grid.Column="2"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="3,0,3,0"
                                            Padding="0"
                                            Click="FilterMoveUp_Click"
                                            Content="â–²"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="FileSizeFilter"
                                            ToolTip="Move filter up" />
                                        <Button
                                            x:Name="FileSizeFilterMoveDownButton"
                                            Grid.Column="3"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,0,0"
                                            Padding="0"
                                            Click="FilterMoveDown_Click"
                                            Content="â–¼"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="FileSizeFilter"
                                            ToolTip="Move filter down" />
                                    </Grid>

                                    <!--  Expanded state (shown when visible)  -->
                                    <Grid x:Name="FileSizeFilterExpandedGrid" Margin="0,0,0,6">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="FileSizeFilterToggleButtonExpanded"
                                            Grid.Column="0"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="FileSizeFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <Label Grid.Column="1" Content="ðŸ“¦ Filter by size" />
                                    </Grid>

                                    <ListBox
                                        x:Name="FileSizeFilterList"
                                        Height="{Binding FileSizeFilterHeight, Mode=TwoWay}"
                                        MinHeight="100"
                                        MaxHeight="200"
                                        BorderThickness="1"
                                        MouseLeftButtonDown="FilterList_MouseLeftButtonDown"
                                        ScrollViewer.CanContentScroll="True"
                                        ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                        ScrollViewer.IsDeferredScrollingEnabled="True"
                                        SelectionChanged="FileSizeFilterList_SelectionChanged"
                                        SelectionMode="Multiple"
                                        Style="{StaticResource FilterListBoxStyle}"
                                        VirtualizingStackPanel.IsVirtualizing="True"
                                        VirtualizingStackPanel.VirtualizationMode="Recycling">
                                        <ListBox.ItemContainerStyle>
                                            <StaticResource ResourceKey="FilterListBoxItemStyle" />
                                        </ListBox.ItemContainerStyle>
                                        <!--  File size ranges will be populated dynamically  -->
                                    </ListBox>
                                </StackPanel>

                                <!--  Damaged Packages Filter Section  -->
                                <StackPanel Margin="0,6,0,0">
                                    <Grid
                                        x:Name="DamagedFilterCollapsedGrid"
                                        Margin="0,0,0,6"
                                        Visibility="Collapsed">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="DamagedFilterToggleButton"
                                            Grid.Column="0"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘ï¸â€ðŸ—¨ï¸"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="DamagedFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <Label Grid.Column="1" Content="âš ï¸ Filter damaged packages" />
                                        <Button
                                            x:Name="DamagedFilterMoveUpButton"
                                            Grid.Column="2"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="3,0,3,0"
                                            Padding="0"
                                            Click="FilterMoveUp_Click"
                                            Content="â–²"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="DamagedFilter"
                                            ToolTip="Move filter up" />
                                        <Button
                                            x:Name="DamagedFilterMoveDownButton"
                                            Grid.Column="3"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,0,0"
                                            Padding="0"
                                            Click="FilterMoveDown_Click"
                                            Content="â–¼"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="DamagedFilter"
                                            ToolTip="Move filter down" />
                                    </Grid>

                                    <Grid x:Name="DamagedFilterExpandedGrid" Margin="0,0,0,6">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="DamagedFilterToggleButtonExpanded"
                                            Grid.Column="0"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="DamagedFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <Label Grid.Column="1" Content="âš ï¸ Filter damaged packages" />
                                    </Grid>

                                    <ListBox
                                        x:Name="DamagedFilterList"
                                        Height="{Binding DamagedFilterHeight, Mode=TwoWay}"
                                        MinHeight="60"
                                        MaxHeight="120"
                                        BorderThickness="1"
                                        MouseLeftButtonDown="FilterList_MouseLeftButtonDown"
                                        ScrollViewer.CanContentScroll="True"
                                        ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                        ScrollViewer.IsDeferredScrollingEnabled="True"
                                        SelectionChanged="DamagedFilterList_SelectionChanged"
                                        SelectionMode="Single"
                                        Style="{StaticResource FilterListBoxStyle}"
                                        VirtualizingStackPanel.IsVirtualizing="True"
                                        VirtualizingStackPanel.VirtualizationMode="Recycling">
                                        <ListBox.ItemContainerStyle>
                                            <StaticResource ResourceKey="FilterListBoxItemStyle" />
                                        </ListBox.ItemContainerStyle>
                                        <!--  Damaged packages will be populated dynamically  -->
                                    </ListBox>
                                </StackPanel>

                            </StackPanel>

                            <!--  Scene Filters Container (Scene Mode Only)  -->
                            <StackPanel x:Name="SceneFiltersContainer" Visibility="Collapsed">

                                <!--  Scene Type Filter Section (Scene Mode Only)  -->
                                <StackPanel
                                    x:Name="SceneTypeFilterSection"
                                    Margin="0,6,0,0"
                                    Visibility="Collapsed">
                                    <!--  Collapsed state label (shown when hidden)  -->
                                    <Grid
                                        x:Name="SceneTypeFilterCollapsedGrid"
                                        Margin="0,0,0,6"
                                        Visibility="Collapsed">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="SceneTypeFilterToggleButton"
                                            Grid.Column="0"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘ï¸â€ðŸ—¨ï¸"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="SceneTypeFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <Label Grid.Column="1" Content="ðŸŽ¬ Filter scene types" />
                                        <Button
                                            x:Name="SceneTypeFilterMoveUpButton"
                                            Grid.Column="2"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="3,0,3,0"
                                            Padding="0"
                                            Click="FilterMoveUp_Click"
                                            Content="â–²"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="SceneTypeFilter"
                                            ToolTip="Move filter up" />
                                        <Button
                                            x:Name="SceneTypeFilterMoveDownButton"
                                            Grid.Column="3"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,0,0"
                                            Padding="0"
                                            Click="FilterMoveDown_Click"
                                            Content="â–¼"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="SceneTypeFilter"
                                            ToolTip="Move filter down" />
                                    </Grid>

                                    <!--  TextBox Grid with eye button (shown when expanded)  -->
                                    <Grid x:Name="SceneTypeFilterTextBoxGrid" Margin="0,0,0,6">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" MinWidth="110" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="SceneTypeFilterToggleButtonExpanded"
                                            Grid.Column="0"
                                            Width="27"
                                            Height="{Binding ElementName=SceneTypeFilterBox, Path=ActualHeight}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="SceneTypeFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <TextBox
                                            x:Name="SceneTypeFilterBox"
                                            Grid.Column="1"
                                            MinWidth="110"
                                            Padding="5"
                                            Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                            GotFocus="FilterTextBox_GotFocus"
                                            LostFocus="FilterTextBox_LostFocus"
                                            Text="ðŸŽ¬ Filter scene types..."
                                            TextChanged="SceneTypeFilterBox_TextChanged" />
                                        <Button
                                            x:Name="SceneTypeClearButton"
                                            Grid.Column="2"
                                            Width="27"
                                            Height="{Binding ElementName=SceneTypeFilterBox, Path=ActualHeight}"
                                            Margin="3,0,0,0"
                                            Padding="3,0"
                                            Click="ClearFilterButton_Click"
                                            Content="âœ•"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            ToolTip="Clear filter"
                                            Visibility="Collapsed" />
                                        <Button
                                            x:Name="SceneTypeSortButton"
                                            Grid.Column="3"
                                            Width="27"
                                            Height="{Binding ElementName=SceneTypeFilterBox, Path=ActualHeight}"
                                            Margin="3,0,0,0"
                                            Padding="0"
                                            Click="SceneTypeSortButton_Click"
                                            Content="â‡…"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            ToolTip="Sort scene types alphabetically" />
                                    </Grid>

                                    <ListBox
                                        x:Name="SceneTypeFilterList"
                                        Height="120"
                                        MinHeight="80"
                                        MaxHeight="200"
                                        BorderThickness="1"
                                        MouseLeftButtonDown="FilterList_MouseLeftButtonDown"
                                        ScrollViewer.CanContentScroll="True"
                                        ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                        ScrollViewer.IsDeferredScrollingEnabled="True"
                                        SelectionChanged="SceneTypeFilterList_SelectionChanged"
                                        SelectionMode="Multiple"
                                        Style="{StaticResource FilterListBoxStyle}"
                                        VirtualizingStackPanel.IsVirtualizing="True"
                                        VirtualizingStackPanel.VirtualizationMode="Recycling">
                                        <ListBox.ItemContainerStyle>
                                            <StaticResource ResourceKey="FilterListBoxItemStyle" />
                                        </ListBox.ItemContainerStyle>
                                    </ListBox>
                                </StackPanel>

                                <!--  Scene Creator Filter Section (Scene Mode Only)  -->
                                <StackPanel
                                    x:Name="SceneCreatorFilterSection"
                                    Margin="0,6,0,0"
                                    Visibility="Collapsed">
                                    <!--  Collapsed state label (shown when hidden)  -->
                                    <Grid
                                        x:Name="SceneCreatorFilterCollapsedGrid"
                                        Margin="0,0,0,6"
                                        Visibility="Collapsed">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="SceneCreatorFilterToggleButton"
                                            Grid.Column="0"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘ï¸â€ðŸ—¨ï¸"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="SceneCreatorFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <Label Grid.Column="1" Content="ðŸ‘¤ Filter scene creators" />
                                        <Button
                                            x:Name="SceneCreatorFilterMoveUpButton"
                                            Grid.Column="2"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="3,0,3,0"
                                            Padding="0"
                                            Click="FilterMoveUp_Click"
                                            Content="â–²"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="SceneCreatorFilter"
                                            ToolTip="Move filter up" />
                                        <Button
                                            x:Name="SceneCreatorFilterMoveDownButton"
                                            Grid.Column="3"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,0,0"
                                            Padding="0"
                                            Click="FilterMoveDown_Click"
                                            Content="â–¼"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="SceneCreatorFilter"
                                            ToolTip="Move filter down" />
                                    </Grid>

                                    <!--  TextBox Grid with eye button (shown when expanded)  -->
                                    <Grid x:Name="SceneCreatorFilterTextBoxGrid" Margin="0,0,0,6">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" MinWidth="110" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="SceneCreatorFilterToggleButtonExpanded"
                                            Grid.Column="0"
                                            Width="27"
                                            Height="{Binding ElementName=SceneCreatorFilterBox, Path=ActualHeight}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="SceneCreatorFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <TextBox
                                            x:Name="SceneCreatorFilterBox"
                                            Grid.Column="1"
                                            MinWidth="110"
                                            Padding="5"
                                            Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                            GotFocus="FilterTextBox_GotFocus"
                                            LostFocus="FilterTextBox_LostFocus"
                                            Text="ðŸ‘¤ Filter scene creators..."
                                            TextChanged="SceneCreatorFilterBox_TextChanged" />
                                        <Button
                                            x:Name="SceneCreatorClearButton"
                                            Grid.Column="2"
                                            Width="27"
                                            Height="{Binding ElementName=SceneCreatorFilterBox, Path=ActualHeight}"
                                            Margin="3,0,0,0"
                                            Padding="3,0"
                                            Click="ClearFilterButton_Click"
                                            Content="âœ•"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            ToolTip="Clear filter"
                                            Visibility="Collapsed" />
                                        <Button
                                            x:Name="SceneCreatorSortButton"
                                            Grid.Column="3"
                                            Width="27"
                                            Height="{Binding ElementName=SceneCreatorFilterBox, Path=ActualHeight}"
                                            Margin="3,0,0,0"
                                            Padding="0"
                                            Click="SceneCreatorSortButton_Click"
                                            Content="â‡…"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            ToolTip="Sort scene creators" />
                                    </Grid>

                                    <ListBox
                                        x:Name="SceneCreatorFilterList"
                                        Height="120"
                                        MinHeight="80"
                                        MaxHeight="200"
                                        BorderThickness="1"
                                        MouseLeftButtonDown="FilterList_MouseLeftButtonDown"
                                        ScrollViewer.CanContentScroll="True"
                                        ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                        ScrollViewer.IsDeferredScrollingEnabled="True"
                                        SelectionChanged="SceneCreatorFilterList_SelectionChanged"
                                        SelectionMode="Multiple"
                                        Style="{StaticResource FilterListBoxStyle}"
                                        VirtualizingStackPanel.IsVirtualizing="True"
                                        VirtualizingStackPanel.VirtualizationMode="Recycling">
                                        <ListBox.ItemContainerStyle>
                                            <StaticResource ResourceKey="FilterListBoxItemStyle" />
                                        </ListBox.ItemContainerStyle>
                                    </ListBox>
                                </StackPanel>

                                <!--  Scene Status Filter Section  -->
                                <StackPanel
                                    x:Name="SceneStatusFilterSection"
                                    Margin="0,6,0,0"
                                    Visibility="Collapsed">
                                    <Grid
                                        x:Name="SceneStatusFilterCollapsedGrid"
                                        Margin="0,0,0,6"
                                        Visibility="Collapsed">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="SceneStatusFilterToggleButton"
                                            Grid.Column="0"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘ï¸â€ðŸ—¨ï¸"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="SceneStatusFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <Label Grid.Column="1" Content="â¤ï¸ Filter by status" />
                                        <Button
                                            x:Name="SceneStatusFilterMoveUpButton"
                                            Grid.Column="2"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="3,0,3,0"
                                            Padding="0"
                                            Click="FilterMoveUp_Click"
                                            Content="â–²"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="SceneStatusFilter"
                                            ToolTip="Move filter up" />
                                        <Button
                                            x:Name="SceneStatusFilterMoveDownButton"
                                            Grid.Column="3"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,0,0"
                                            Padding="0"
                                            Click="FilterMoveDown_Click"
                                            Content="â–¼"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="SceneStatusFilter"
                                            ToolTip="Move filter down" />
                                    </Grid>

                                    <Grid x:Name="SceneStatusFilterExpandedGrid" Margin="0,0,0,6">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="SceneStatusFilterToggleButtonExpanded"
                                            Grid.Column="0"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="SceneStatusFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <Label Grid.Column="1" Content="â¤ï¸ Filter by status" />
                                    </Grid>

                                    <ListBox
                                        x:Name="SceneStatusFilterList"
                                        Height="120"
                                        MinHeight="60"
                                        MaxHeight="200"
                                        BorderThickness="1"
                                        ScrollViewer.CanContentScroll="True"
                                        ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                        ScrollViewer.IsDeferredScrollingEnabled="True"
                                        SelectionChanged="SceneStatusFilterList_SelectionChanged"
                                        SelectionMode="Multiple"
                                        Style="{StaticResource FilterListBoxStyle}"
                                        VirtualizingStackPanel.IsVirtualizing="True"
                                        VirtualizingStackPanel.VirtualizationMode="Recycling">
                                        <ListBox.ItemContainerStyle>
                                            <StaticResource ResourceKey="FilterListBoxItemStyle" />
                                        </ListBox.ItemContainerStyle>
                                    </ListBox>
                                </StackPanel>

                                <!--  Scene Source Filter Section (Scene Mode Only)  -->
                                <StackPanel
                                    x:Name="SceneSourceFilterSection"
                                    Margin="0,6,0,0"
                                    Visibility="Collapsed">
                                    <!--  Collapsed state label (shown when hidden)  -->
                                    <Grid
                                        x:Name="SceneSourceFilterCollapsedGrid"
                                        Margin="0,0,0,6"
                                        Visibility="Collapsed">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="SceneSourceFilterToggleButton"
                                            Grid.Column="0"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘ï¸â€ðŸ—¨ï¸"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="SceneSourceFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <Label Grid.Column="1" Content="ðŸ“ Filter scene source" />
                                        <Button
                                            x:Name="SceneSourceFilterMoveUpButton"
                                            Grid.Column="2"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="3,0,3,0"
                                            Padding="0"
                                            Click="FilterMoveUp_Click"
                                            Content="â–²"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="SceneSourceFilter"
                                            ToolTip="Move filter up" />
                                        <Button
                                            x:Name="SceneSourceFilterMoveDownButton"
                                            Grid.Column="3"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,0,0"
                                            Padding="0"
                                            Click="FilterMoveDown_Click"
                                            Content="â–¼"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="SceneSourceFilter"
                                            ToolTip="Move filter down" />
                                    </Grid>

                                    <!--  Expanded state (shown when visible)  -->
                                    <Grid x:Name="SceneSourceFilterExpandedGrid" Margin="0,0,0,6">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="SceneSourceFilterToggleButtonExpanded"
                                            Grid.Column="0"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="SceneSourceFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <Label Grid.Column="1" Content="ðŸ“ Filter scene source" />
                                    </Grid>

                                    <ListBox
                                        x:Name="SceneSourceFilterList"
                                        Height="80"
                                        MinHeight="60"
                                        MaxHeight="120"
                                        BorderThickness="1"
                                        MouseLeftButtonDown="FilterList_MouseLeftButtonDown"
                                        ScrollViewer.CanContentScroll="True"
                                        ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                        ScrollViewer.IsDeferredScrollingEnabled="True"
                                        SelectionChanged="SceneSourceFilterList_SelectionChanged"
                                        SelectionMode="Multiple"
                                        Style="{StaticResource FilterListBoxStyle}"
                                        VirtualizingStackPanel.IsVirtualizing="True"
                                        VirtualizingStackPanel.VirtualizationMode="Recycling">
                                        <ListBox.ItemContainerStyle>
                                            <StaticResource ResourceKey="FilterListBoxItemStyle" />
                                        </ListBox.ItemContainerStyle>
                                    </ListBox>
                                </StackPanel>

                                <!--  Scene Date Filter Section  -->
                                <StackPanel
                                    x:Name="SceneDateFilterSection"
                                    Margin="0,6,0,0"
                                    Visibility="Collapsed">
                                    <Grid
                                        x:Name="SceneDateFilterCollapsedGrid"
                                        Margin="0,0,0,6"
                                        Visibility="Collapsed">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="SceneDateFilterToggleButton"
                                            Grid.Column="0"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘ï¸â€ðŸ—¨ï¸"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="SceneDateFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <Label Grid.Column="1" Content="ðŸ“… Filter by date" />
                                        <Button
                                            x:Name="SceneDateFilterMoveUpButton"
                                            Grid.Column="2"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="3,0,3,0"
                                            Padding="0"
                                            Click="FilterMoveUp_Click"
                                            Content="â–²"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="SceneDateFilter"
                                            ToolTip="Move filter up" />
                                        <Button
                                            x:Name="SceneDateFilterMoveDownButton"
                                            Grid.Column="3"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,0,0"
                                            Padding="0"
                                            Click="FilterMoveDown_Click"
                                            Content="â–¼"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="SceneDateFilter"
                                            ToolTip="Move filter down" />
                                    </Grid>

                                    <Grid x:Name="SceneDateFilterExpandedGrid" Margin="0,0,0,6">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="SceneDateFilterToggleButtonExpanded"
                                            Grid.Column="0"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="SceneDateFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <Label Grid.Column="1" Content="ðŸ“… Filter by date" />
                                    </Grid>

                                    <ListBox
                                        x:Name="SceneDateFilterList"
                                        Height="120"
                                        MinHeight="60"
                                        MaxHeight="200"
                                        BorderThickness="1"
                                        ScrollViewer.CanContentScroll="True"
                                        ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                        ScrollViewer.IsDeferredScrollingEnabled="True"
                                        SelectionChanged="SceneDateFilterList_SelectionChanged"
                                        SelectionMode="Multiple"
                                        Style="{StaticResource FilterListBoxStyle}"
                                        VirtualizingStackPanel.IsVirtualizing="True"
                                        VirtualizingStackPanel.VirtualizationMode="Recycling">
                                        <ListBox.ItemContainerStyle>
                                            <StaticResource ResourceKey="FilterListBoxItemStyle" />
                                        </ListBox.ItemContainerStyle>
                                    </ListBox>
                                </StackPanel>

                                <!--  Scene File Size Filter Section  -->
                                <StackPanel
                                    x:Name="SceneFileSizeFilterSection"
                                    Margin="0,6,0,0"
                                    Visibility="Collapsed">
                                    <Grid
                                        x:Name="SceneFileSizeFilterCollapsedGrid"
                                        Margin="0,0,0,6"
                                        Visibility="Collapsed">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="SceneFileSizeFilterToggleButton"
                                            Grid.Column="0"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘ï¸â€ðŸ—¨ï¸"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="SceneFileSizeFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <Label Grid.Column="1" Content="ðŸ’¾ Filter by file size" />
                                        <Button
                                            x:Name="SceneFileSizeFilterMoveUpButton"
                                            Grid.Column="2"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="3,0,3,0"
                                            Padding="0"
                                            Click="FilterMoveUp_Click"
                                            Content="â–²"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="SceneFileSizeFilter"
                                            ToolTip="Move filter up" />
                                        <Button
                                            x:Name="SceneFileSizeFilterMoveDownButton"
                                            Grid.Column="3"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,0,0"
                                            Padding="0"
                                            Click="FilterMoveDown_Click"
                                            Content="â–¼"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="SceneFileSizeFilter"
                                            ToolTip="Move filter down" />
                                    </Grid>

                                    <Grid x:Name="SceneFileSizeFilterExpandedGrid" Margin="0,0,0,6">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="SceneFileSizeFilterToggleButtonExpanded"
                                            Grid.Column="0"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="SceneFileSizeFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <Label Grid.Column="1" Content="ðŸ’¾ Filter by file size" />
                                    </Grid>

                                    <ListBox
                                        x:Name="SceneFileSizeFilterList"
                                        Height="120"
                                        MinHeight="60"
                                        MaxHeight="200"
                                        BorderThickness="1"
                                        ScrollViewer.CanContentScroll="True"
                                        ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                        ScrollViewer.IsDeferredScrollingEnabled="True"
                                        SelectionChanged="SceneFileSizeFilterList_SelectionChanged"
                                        SelectionMode="Multiple"
                                        Style="{StaticResource FilterListBoxStyle}"
                                        VirtualizingStackPanel.IsVirtualizing="True"
                                        VirtualizingStackPanel.VirtualizationMode="Recycling">
                                        <ListBox.ItemContainerStyle>
                                            <StaticResource ResourceKey="FilterListBoxItemStyle" />
                                        </ListBox.ItemContainerStyle>
                                    </ListBox>
                                </StackPanel>

                            </StackPanel>

                            <!--  Preset Filters Container (Presets Mode Only)  -->
                            <StackPanel x:Name="PresetFiltersContainer" Visibility="Collapsed">

                                <!--  Preset Category Filter Section  -->
                                <StackPanel
                                    x:Name="PresetCategoryFilterSection"
                                    Margin="0,6,0,0"
                                    Visibility="Collapsed">
                                    <!--  Collapsed state label (shown when hidden)  -->
                                    <Grid
                                        x:Name="PresetCategoryFilterCollapsedGrid"
                                        Margin="0,0,0,6"
                                        Visibility="Collapsed">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="PresetCategoryFilterToggleButton"
                                            Grid.Column="0"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘ï¸â€ðŸ—¨ï¸"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="PresetCategoryFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <Label Grid.Column="1" Content="ðŸ“‚ Filter by category" />
                                        <Button
                                            x:Name="PresetCategoryFilterMoveUpButton"
                                            Grid.Column="2"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="3,0,3,0"
                                            Padding="0"
                                            Click="FilterMoveUp_Click"
                                            Content="â–²"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="PresetCategoryFilter"
                                            ToolTip="Move filter up" />
                                        <Button
                                            x:Name="PresetCategoryFilterMoveDownButton"
                                            Grid.Column="3"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,0,0"
                                            Padding="0"
                                            Click="FilterMoveDown_Click"
                                            Content="â–¼"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="PresetCategoryFilter"
                                            ToolTip="Move filter down" />
                                    </Grid>

                                    <!--  TextBox Grid with eye button (shown when expanded)  -->
                                    <Grid x:Name="PresetCategoryFilterTextBoxGrid" Margin="0,0,0,6">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" MinWidth="110" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="PresetCategoryFilterToggleButtonExpanded"
                                            Grid.Column="0"
                                            Width="27"
                                            Height="{Binding ElementName=PresetCategoryFilterBox, Path=ActualHeight}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="PresetCategoryFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <TextBox
                                            x:Name="PresetCategoryFilterBox"
                                            Grid.Column="1"
                                            MinWidth="110"
                                            Padding="5"
                                            Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                            GotFocus="FilterTextBox_GotFocus"
                                            LostFocus="FilterTextBox_LostFocus"
                                            Text="ðŸŽ¬ Filter by category..."
                                            TextChanged="PresetCategoryFilterBox_TextChanged" />
                                        <Button
                                            x:Name="PresetCategoryClearButton"
                                            Grid.Column="2"
                                            Width="27"
                                            Height="{Binding ElementName=PresetCategoryFilterBox, Path=ActualHeight}"
                                            Margin="3,0,0,0"
                                            Padding="3,0"
                                            Click="ClearFilterButton_Click"
                                            Content="âœ•"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            ToolTip="Clear filter"
                                            Visibility="Collapsed" />
                                        <Button
                                            x:Name="PresetCategorySortButton"
                                            Grid.Column="3"
                                            Width="27"
                                            Height="{Binding ElementName=PresetCategoryFilterBox, Path=ActualHeight}"
                                            Margin="3,0,0,0"
                                            Padding="0"
                                            Click="PresetCategorySortButton_Click"
                                            Content="â‡…"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            ToolTip="Sort categories alphabetically" />
                                    </Grid>

                                    <ListBox
                                        x:Name="PresetCategoryFilterList"
                                        Height="120"
                                        MinHeight="80"
                                        MaxHeight="200"
                                        BorderThickness="1"
                                        MouseLeftButtonDown="FilterList_MouseLeftButtonDown"
                                        ScrollViewer.CanContentScroll="True"
                                        ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                        ScrollViewer.IsDeferredScrollingEnabled="True"
                                        SelectionChanged="PresetCategoryFilterList_SelectionChanged"
                                        SelectionMode="Multiple"
                                        Style="{StaticResource FilterListBoxStyle}"
                                        VirtualizingStackPanel.IsVirtualizing="True"
                                        VirtualizingStackPanel.VirtualizationMode="Recycling">
                                        <ListBox.ItemContainerStyle>
                                            <StaticResource ResourceKey="FilterListBoxItemStyle" />
                                        </ListBox.ItemContainerStyle>
                                    </ListBox>
                                </StackPanel>

                                <!--  Preset Subfolder Filter Section  -->
                                <StackPanel
                                    x:Name="PresetSubfolderFilterSection"
                                    Margin="0,6,0,0"
                                    Visibility="Collapsed">
                                    <!--  Collapsed state label (shown when hidden)  -->
                                    <Grid
                                        x:Name="PresetSubfolderFilterCollapsedGrid"
                                        Margin="0,0,0,6"
                                        Visibility="Collapsed">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="PresetSubfolderFilterToggleButton"
                                            Grid.Column="0"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘ï¸â€ðŸ—¨ï¸"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="PresetSubfolderFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <Label Grid.Column="1" Content="ðŸ“ Filter by subfolder" />
                                        <Button
                                            x:Name="PresetSubfolderFilterMoveUpButton"
                                            Grid.Column="2"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="3,0,3,0"
                                            Padding="0"
                                            Click="FilterMoveUp_Click"
                                            Content="â–²"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="PresetSubfolderFilter"
                                            ToolTip="Move filter up" />
                                        <Button
                                            x:Name="PresetSubfolderFilterMoveDownButton"
                                            Grid.Column="3"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,0,0"
                                            Padding="0"
                                            Click="FilterMoveDown_Click"
                                            Content="â–¼"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="PresetSubfolderFilter"
                                            ToolTip="Move filter down" />
                                    </Grid>

                                    <!--  TextBox Grid with eye button (shown when expanded)  -->
                                    <Grid x:Name="PresetSubfolderFilterTextBoxGrid" Margin="0,0,0,6">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" MinWidth="110" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="PresetSubfolderFilterToggleButtonExpanded"
                                            Grid.Column="0"
                                            Width="27"
                                            Height="{Binding ElementName=PresetSubfolderFilterBox, Path=ActualHeight}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="PresetSubfolderFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <TextBox
                                            x:Name="PresetSubfolderFilterBox"
                                            Grid.Column="1"
                                            MinWidth="110"
                                            Padding="5"
                                            Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                            GotFocus="FilterTextBox_GotFocus"
                                            LostFocus="FilterTextBox_LostFocus"
                                            Text="ðŸ“ Filter by subfolder..."
                                            TextChanged="PresetSubfolderFilterBox_TextChanged" />
                                        <Button
                                            x:Name="PresetSubfolderClearButton"
                                            Grid.Column="2"
                                            Width="27"
                                            Height="{Binding ElementName=PresetSubfolderFilterBox, Path=ActualHeight}"
                                            Margin="3,0,0,0"
                                            Padding="3,0"
                                            Click="ClearFilterButton_Click"
                                            Content="âœ•"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            ToolTip="Clear filter"
                                            Visibility="Collapsed" />
                                        <Button
                                            x:Name="PresetSubfolderSortButton"
                                            Grid.Column="3"
                                            Width="27"
                                            Height="{Binding ElementName=PresetSubfolderFilterBox, Path=ActualHeight}"
                                            Margin="3,0,0,0"
                                            Padding="0"
                                            Click="PresetSubfolderSortButton_Click"
                                            Content="â‡…"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            ToolTip="Sort subfolders alphabetically" />
                                    </Grid>

                                    <ListBox
                                        x:Name="PresetSubfolderFilterList"
                                        Height="120"
                                        MinHeight="80"
                                        MaxHeight="200"
                                        BorderThickness="1"
                                        MouseLeftButtonDown="FilterList_MouseLeftButtonDown"
                                        ScrollViewer.CanContentScroll="True"
                                        ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                        ScrollViewer.IsDeferredScrollingEnabled="True"
                                        SelectionChanged="PresetSubfolderFilterList_SelectionChanged"
                                        SelectionMode="Multiple"
                                        Style="{StaticResource FilterListBoxStyle}"
                                        VirtualizingStackPanel.IsVirtualizing="True"
                                        VirtualizingStackPanel.VirtualizationMode="Recycling">
                                        <ListBox.ItemContainerStyle>
                                            <StaticResource ResourceKey="FilterListBoxItemStyle" />
                                        </ListBox.ItemContainerStyle>
                                    </ListBox>
                                </StackPanel>

                                <!--  Preset Status Filter Section  -->
                                <StackPanel
                                    x:Name="PresetStatusFilterSection"
                                    Margin="0,6,0,0"
                                    Visibility="Collapsed">
                                    <Grid
                                        x:Name="PresetStatusFilterCollapsedGrid"
                                        Margin="0,0,0,6"
                                        Visibility="Collapsed">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="PresetStatusFilterToggleButton"
                                            Grid.Column="0"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘ï¸â€ðŸ—¨ï¸"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="PresetStatusFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <Label Grid.Column="1" Content="â¤ï¸ Filter by status" />
                                        <Button
                                            x:Name="PresetStatusFilterMoveUpButton"
                                            Grid.Column="2"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="3,0,3,0"
                                            Padding="0"
                                            Click="FilterMoveUp_Click"
                                            Content="â–²"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="PresetStatusFilter"
                                            ToolTip="Move filter up" />
                                        <Button
                                            x:Name="PresetStatusFilterMoveDownButton"
                                            Grid.Column="3"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,0,0"
                                            Padding="0"
                                            Click="FilterMoveDown_Click"
                                            Content="â–¼"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="PresetStatusFilter"
                                            ToolTip="Move filter down" />
                                    </Grid>

                                    <Grid x:Name="PresetStatusFilterExpandedGrid" Margin="0,0,0,6">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="PresetStatusFilterToggleButtonExpanded"
                                            Grid.Column="0"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="PresetStatusFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <Label Grid.Column="1" Content="â¤ï¸ Filter by status" />
                                    </Grid>

                                    <ListBox
                                        x:Name="PresetStatusFilterList"
                                        Height="120"
                                        MinHeight="60"
                                        MaxHeight="200"
                                        BorderThickness="1"
                                        ScrollViewer.CanContentScroll="True"
                                        ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                        ScrollViewer.IsDeferredScrollingEnabled="True"
                                        SelectionChanged="PresetStatusFilterList_SelectionChanged"
                                        SelectionMode="Multiple"
                                        Style="{StaticResource FilterListBoxStyle}"
                                        VirtualizingStackPanel.IsVirtualizing="True"
                                        VirtualizingStackPanel.VirtualizationMode="Recycling">
                                        <ListBox.ItemContainerStyle>
                                            <StaticResource ResourceKey="FilterListBoxItemStyle" />
                                        </ListBox.ItemContainerStyle>
                                    </ListBox>
                                </StackPanel>

                                <!--  Preset Date Filter Section  -->
                                <StackPanel
                                    x:Name="PresetDateFilterSection"
                                    Margin="0,6,0,0"
                                    Visibility="Collapsed">
                                    <Grid
                                        x:Name="PresetDateFilterCollapsedGrid"
                                        Margin="0,0,0,6"
                                        Visibility="Collapsed">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="PresetDateFilterToggleButton"
                                            Grid.Column="0"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘ï¸â€ðŸ—¨ï¸"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="PresetDateFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <Label Grid.Column="1" Content="ðŸ“… Filter by date" />
                                        <Button
                                            x:Name="PresetDateFilterMoveUpButton"
                                            Grid.Column="2"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="3,0,3,0"
                                            Padding="0"
                                            Click="FilterMoveUp_Click"
                                            Content="â–²"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="PresetDateFilter"
                                            ToolTip="Move filter up" />
                                        <Button
                                            x:Name="PresetDateFilterMoveDownButton"
                                            Grid.Column="3"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,0,0"
                                            Padding="0"
                                            Click="FilterMoveDown_Click"
                                            Content="â–¼"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="PresetDateFilter"
                                            ToolTip="Move filter down" />
                                    </Grid>

                                    <Grid x:Name="PresetDateFilterExpandedGrid" Margin="0,0,0,6">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="PresetDateFilterToggleButtonExpanded"
                                            Grid.Column="0"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="PresetDateFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <Label Grid.Column="1" Content="ðŸ“… Filter by date" />
                                    </Grid>

                                    <ListBox
                                        x:Name="PresetDateFilterList"
                                        Height="120"
                                        MinHeight="60"
                                        MaxHeight="200"
                                        BorderThickness="1"
                                        ScrollViewer.CanContentScroll="True"
                                        ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                        ScrollViewer.IsDeferredScrollingEnabled="True"
                                        SelectionChanged="PresetDateFilterList_SelectionChanged"
                                        SelectionMode="Multiple"
                                        Style="{StaticResource FilterListBoxStyle}"
                                        VirtualizingStackPanel.IsVirtualizing="True"
                                        VirtualizingStackPanel.VirtualizationMode="Recycling">
                                        <ListBox.ItemContainerStyle>
                                            <StaticResource ResourceKey="FilterListBoxItemStyle" />
                                        </ListBox.ItemContainerStyle>
                                    </ListBox>
                                </StackPanel>

                                <!--  Preset File Size Filter Section  -->
                                <StackPanel
                                    x:Name="PresetFileSizeFilterSection"
                                    Margin="0,6,0,0"
                                    Visibility="Collapsed">
                                    <Grid
                                        x:Name="PresetFileSizeFilterCollapsedGrid"
                                        Margin="0,0,0,6"
                                        Visibility="Collapsed">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="PresetFileSizeFilterToggleButton"
                                            Grid.Column="0"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘ï¸â€ðŸ—¨ï¸"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="PresetFileSizeFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <Label Grid.Column="1" Content="ðŸ’¾ Filter by file size" />
                                        <Button
                                            x:Name="PresetFileSizeFilterMoveUpButton"
                                            Grid.Column="2"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="3,0,3,0"
                                            Padding="0"
                                            Click="FilterMoveUp_Click"
                                            Content="â–²"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="PresetFileSizeFilter"
                                            ToolTip="Move filter up" />
                                        <Button
                                            x:Name="PresetFileSizeFilterMoveDownButton"
                                            Grid.Column="3"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,0,0"
                                            Padding="0"
                                            Click="FilterMoveDown_Click"
                                            Content="â–¼"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="PresetFileSizeFilter"
                                            ToolTip="Move filter down" />
                                    </Grid>

                                    <Grid x:Name="PresetFileSizeFilterExpandedGrid" Margin="0,0,0,6">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <Button
                                            x:Name="PresetFileSizeFilterToggleButtonExpanded"
                                            Grid.Column="0"
                                            Width="{StaticResource FilterToggleButtonSize}"
                                            Height="{StaticResource FilterToggleButtonSize}"
                                            Margin="0,0,6,0"
                                            Padding="0"
                                            Click="ToggleFilterVisibility_Click"
                                            Content="ðŸ‘"
                                            FontSize="15"
                                            Style="{StaticResource BlueHoverButtonStyle}"
                                            Tag="PresetFileSizeFilter"
                                            ToolTip="Toggle filter section visibility" />
                                        <Label Grid.Column="1" Content="ðŸ’¾ Filter by file size" />
                                    </Grid>

                                    <ListBox
                                        x:Name="PresetFileSizeFilterList"
                                        Height="120"
                                        MinHeight="60"
                                        MaxHeight="200"
                                        BorderThickness="1"
                                        ScrollViewer.CanContentScroll="True"
                                        ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                        ScrollViewer.IsDeferredScrollingEnabled="True"
                                        SelectionChanged="PresetFileSizeFilterList_SelectionChanged"
                                        SelectionMode="Multiple"
                                        Style="{StaticResource FilterListBoxStyle}"
                                        VirtualizingStackPanel.IsVirtualizing="True"
                                        VirtualizingStackPanel.VirtualizationMode="Recycling">
                                        <ListBox.ItemContainerStyle>
                                            <StaticResource ResourceKey="FilterListBoxItemStyle" />
                                        </ListBox.ItemContainerStyle>
                                    </ListBox>
                                </StackPanel>

                            </StackPanel>

                        </StackPanel>
                    </ScrollViewer>

                    <!--  Compact Scroll Here Area  -->
                    <Border
                        x:Name="ScrollHereArea"
                        Grid.Row="2"
                        Height="28"
                        Margin="8,0,8,4"
                        Background="Transparent"
                        BorderBrush="{DynamicResource {x:Static SystemColors.ControlDarkBrushKey}}"
                        BorderThickness="0,1,0,0"
                        Cursor="ScrollNS"
                        PreviewMouseWheel="ScrollHereArea_PreviewMouseWheel">
                        <TextBlock
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            FontSize="11"
                            Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                            Opacity="0.8"
                            Text="Scroll here or at top button area" />
                    </Border>
                </Grid>
            </Border>

            <!--  Splitter  -->
            <GridSplitter
                Grid.Column="1"
                Width="2"
                HorizontalAlignment="Stretch"
                Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" />

            <!--  Center Panel - Packages/Scenes  -->
            <Border
                Grid.Column="2"
                Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"
                BorderBrush="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}"
                BorderThickness="1"
                CornerRadius="{StaticResource CornerRadiusValue}">
                <Grid Margin="6,6,6,6">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <!--  Package/Scene Search  -->
                    <Grid Grid.Row="0" Margin="0,0,0,6">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <!--  Package Action Tabs  -->
                        <Grid
                            Grid.Row="0"
                            Grid.Column="0"
                            Grid.ColumnSpan="3"
                            Margin="0,0,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <Button
                                Name="FavoriteToggleButton"
                                Grid.Column="0"
                                Margin="0,0,3,0"
                                Padding="6"
                                VerticalAlignment="Stretch"
                                HorizontalContentAlignment="Center"
                                VerticalContentAlignment="Center"
                                Click="FavoriteToggleButton_Click"
                                FontSize="12"
                                PreviewMouseRightButtonDown="FavoriteToggleButton_PreviewMouseRightButtonDown"
                                ToolTip="Left-click: Add to favorites | Right-click: Remove from favorites | Ctrl+click: Open Favorites.txt">
                                <Button.Content>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock
                                            VerticalAlignment="Center"
                                            FontSize="13"
                                            FontWeight="Bold"
                                            Foreground="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"
                                            Text="â¤ï¸ " />
                                        <TextBlock VerticalAlignment="Center" Text="Favorite" />
                                        <TextBlock
                                            Name="FavoriteCountText"
                                            Margin="4,0,0,0"
                                            VerticalAlignment="Center"
                                            FontSize="11"
                                            FontWeight="Bold"
                                            Foreground="#FF1493"
                                            Text="" />
                                    </StackPanel>
                                </Button.Content>
                                <Button.Style>
                                    <Style BasedOn="{StaticResource BlueHoverButtonStyle}" TargetType="Button" />
                                </Button.Style>
                            </Button>

                            <Button
                                Name="AutoInstallToggleButton"
                                Grid.Column="1"
                                Margin="3,0,3,0"
                                Padding="3,3"
                                VerticalAlignment="Stretch"
                                HorizontalContentAlignment="Center"
                                VerticalContentAlignment="Center"
                                Click="AutoInstallToggleButton_Click"
                                FontSize="12"
                                PreviewMouseRightButtonDown="AutoInstallToggleButton_PreviewMouseRightButtonDown"
                                ToolTip="Left-click: Add to autoinstall | Right-click: Remove from autoinstall | Ctrl+click: Open AutoInstall.txt">
                                <Button.Content>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock
                                            VerticalAlignment="Center"
                                            FontSize="14"
                                            FontWeight="Bold"
                                            Foreground="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"
                                            Text="A " />
                                        <TextBlock VerticalAlignment="Center" Text="AutoInstall" />
                                        <TextBlock
                                            Name="AutoinstallCountText"
                                            Margin="4,0,0,0"
                                            VerticalAlignment="Center"
                                            FontSize="11"
                                            FontWeight="Bold"
                                            Foreground="#00CED1"
                                            Text="" />
                                    </StackPanel>
                                </Button.Content>
                                <Button.Style>
                                    <Style BasedOn="{StaticResource BlueHoverButtonStyle}" TargetType="Button" />
                                </Button.Style>
                            </Button>

                            <Button
                                Name="HideToggleButton"
                                Grid.Column="1"
                                Margin="3,0,3,0"
                                Padding="3,3"
                                VerticalAlignment="Stretch"
                                HorizontalContentAlignment="Center"
                                VerticalContentAlignment="Center"
                                Click="HideToggleButton_Click"
                                FontSize="12"
                                PreviewMouseRightButtonDown="HideToggleButton_PreviewMouseRightButtonDown"
                                ToolTip="Left-click: Hide selected scenes | Right-click: Unhide selected scenes"
                                Visibility="Collapsed">
                                <Button.Content>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock
                                            VerticalAlignment="Center"
                                            FontSize="14"
                                            FontWeight="Bold"
                                            Foreground="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"
                                            Text="ðŸ™ˆ " />
                                        <TextBlock VerticalAlignment="Center" Text="Hide" />
                                        <TextBlock
                                            Name="HideCountText"
                                            Margin="4,0,0,0"
                                            VerticalAlignment="Center"
                                            FontSize="11"
                                            FontWeight="Bold"
                                            Foreground="#FF6347"
                                            Text="" />
                                    </StackPanel>
                                </Button.Content>
                                <Button.Style>
                                    <Style BasedOn="{StaticResource BlueHoverButtonStyle}" TargetType="Button" />
                                </Button.Style>
                            </Button>

                            <Button
                                Name="OptimizeToggleButton"
                                Grid.Column="2"
                                Margin="3,0,0,0"
                                Padding="10,6"
                                VerticalAlignment="Stretch"
                                HorizontalContentAlignment="Center"
                                VerticalContentAlignment="Center"
                                Click="OptimizeToggleButton_Click"
                                FontSize="12"
                                ToolTip="Optimize selected packages">
                                <Button.Content>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock
                                            VerticalAlignment="Center"
                                            FontSize="14"
                                            FontWeight="Bold"
                                            Foreground="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"
                                            Text="âš¡ " />
                                        <TextBlock VerticalAlignment="Center" Text="Optimize" />
                                        <TextBlock
                                            Name="OptimizeCountText"
                                            Margin="4,0,0,0"
                                            VerticalAlignment="Center"
                                            FontSize="11"
                                            FontWeight="Bold"
                                            Foreground="#FFA500"
                                            Text="" />
                                    </StackPanel>
                                </Button.Content>
                                <Button.Style>
                                    <Style BasedOn="{StaticResource BlueHoverButtonStyle}" TargetType="Button" />
                                </Button.Style>
                            </Button>
                        </Grid>

                        <TextBox
                            Name="PackageSearchBox"
                            Grid.Row="1"
                            Grid.Column="0"
                            Margin="0,6,0,0"
                            Padding="5"
                            Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                            GotFocus="FilterTextBox_GotFocus"
                            LostFocus="FilterTextBox_LostFocus"
                            Text="ðŸ“¦ Filter packages, descriptions, tags..."
                            TextChanged="PackageSearchBox_TextChanged" />
                        <Button
                            Name="PackageSearchClearButton"
                            Grid.Row="1"
                            Grid.Column="1"
                            MinWidth="30"
                            Margin="3,6,0,0"
                            Padding="3,0"
                            VerticalAlignment="Center"
                            Click="ClearFilterButton_Click"
                            Content="âœ•"
                            FontSize="12"
                            FontWeight="Bold"
                            ToolTip="Clear filter"
                            Visibility="Collapsed">
                            <Button.Style>
                                <Style BasedOn="{StaticResource BlueHoverButtonStyle}" TargetType="Button">
                                    <Setter Property="Width" Value="{Binding ElementName=PackageSearchBox, Path=ActualHeight}" />
                                    <Setter Property="Height" Value="{Binding ElementName=PackageSearchBox, Path=ActualHeight}" />
                                </Style>
                            </Button.Style>
                        </Button>
                        <Button
                            Name="PackageSortButton"
                            Grid.Row="1"
                            Grid.Column="2"
                            MinWidth="30"
                            Margin="2,6,0,0"
                            Padding="0"
                            VerticalAlignment="Center"
                            Click="PackageSortButton_Click"
                            Content="â‡…"
                            FontSize="14"
                            FontWeight="Bold"
                            MouseWheel="PackageSortButton_MouseWheel"
                            ToolTip="Sort (Scroll to navigate)">
                            <Button.Style>
                                <Style BasedOn="{StaticResource BlueHoverButtonStyle}" TargetType="Button">
                                    <Setter Property="Width" Value="{Binding ElementName=PackageSearchBox, Path=ActualHeight}" />
                                    <Setter Property="Height" Value="{Binding ElementName=PackageSearchBox, Path=ActualHeight}" />
                                </Style>
                            </Button.Style>
                        </Button>

                        <!--  Scene Search Box (hidden by default)  -->
                        <TextBox
                            Name="SceneSearchBox"
                            Grid.Row="1"
                            Grid.Column="0"
                            Margin="0,6,0,0"
                            Padding="5"
                            Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                            GotFocus="FilterTextBox_GotFocus"
                            LostFocus="FilterTextBox_LostFocus"
                            Text="ðŸ“ Filter scenes by name, creator, type..."
                            TextChanged="SceneSearchBox_TextChanged"
                            Visibility="Collapsed" />
                        <Button
                            Name="SceneSearchClearButton"
                            Grid.Row="1"
                            Grid.Column="1"
                            MinWidth="30"
                            Margin="3,6,0,0"
                            Padding="3,0"
                            VerticalAlignment="Center"
                            Click="ClearSceneFilterButton_Click"
                            Content="âœ•"
                            FontSize="12"
                            FontWeight="Bold"
                            ToolTip="Clear filter"
                            Visibility="Collapsed">
                            <Button.Style>
                                <Style BasedOn="{StaticResource BlueHoverButtonStyle}" TargetType="Button">
                                    <Setter Property="Width" Value="{Binding ElementName=SceneSearchBox, Path=ActualHeight}" />
                                    <Setter Property="Height" Value="{Binding ElementName=SceneSearchBox, Path=ActualHeight}" />
                                </Style>
                            </Button.Style>
                        </Button>

                        <!--  Presets Search Box (hidden by default)  -->
                        <TextBox
                            Name="CustomAtomSearchBox"
                            Grid.Row="1"
                            Grid.Column="0"
                            Margin="0,6,0,0"
                            Padding="5"
                            Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                            GotFocus="FilterTextBox_GotFocus"
                            LostFocus="FilterTextBox_LostFocus"
                            Text="ðŸ” Filter presets by name..."
                            TextChanged="CustomAtomSearchBox_TextChanged"
                            Visibility="Collapsed" />
                        <Button
                            Name="CustomAtomSearchClearButton"
                            Grid.Row="1"
                            Grid.Column="1"
                            MinWidth="30"
                            Margin="3,6,0,0"
                            Padding="3,0"
                            VerticalAlignment="Center"
                            Click="ClearCustomAtomFilterButton_Click"
                            Content="âœ•"
                            FontSize="12"
                            FontWeight="Bold"
                            ToolTip="Clear filter"
                            Visibility="Collapsed">
                            <Button.Style>
                                <Style BasedOn="{StaticResource BlueHoverButtonStyle}" TargetType="Button">
                                    <Setter Property="Width" Value="{Binding ElementName=CustomAtomSearchBox, Path=ActualHeight}" />
                                    <Setter Property="Height" Value="{Binding ElementName=CustomAtomSearchBox, Path=ActualHeight}" />
                                </Style>
                            </Button.Style>
                        </Button>
                    </Grid>

                    <!--  Package List  -->
                    <DataGrid
                        x:Name="PackageDataGrid"
                        Grid.Row="1"
                        Margin="0,0,0,0"
                        AutoGenerateColumns="False"
                        Background="Transparent"
                        BorderThickness="1"
                        CanUserAddRows="False"
                        CanUserDeleteRows="False"
                        CanUserReorderColumns="True"
                        CanUserResizeColumns="True"
                        CanUserSortColumns="True"
                        EnableColumnVirtualization="True"
                        EnableRowVirtualization="True"
                        FontSize="12"
                        GridLinesVisibility="Horizontal"
                        HeadersVisibility="None"
                        IsManipulationEnabled="False"
                        IsReadOnly="True"
                        ItemsSource="{Binding Source={StaticResource PackagesView}}"
                        RowHeaderWidth="0"
                        RowHeight="65"
                        RowStyle="{StaticResource RoundedDataGridRowStyle}"
                        ScrollViewer.CanContentScroll="True"
                        ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                        ScrollViewer.IsDeferredScrollingEnabled="True"
                        SelectionChanged="PackageDataGrid_SelectionChanged"
                        SelectionMode="Extended"
                        VirtualizingPanel.CacheLength="10,10"
                        VirtualizingPanel.CacheLengthUnit="Item"
                        VirtualizingPanel.IsContainerVirtualizable="True"
                        VirtualizingPanel.IsVirtualizing="True"
                        VirtualizingPanel.ScrollUnit="Item"
                        VirtualizingPanel.VirtualizationMode="Recycling">
                        <DataGrid.Resources>
                            <Style BasedOn="{StaticResource DataGridScrollBarStyle}" TargetType="{x:Type ScrollBar}" />
                        </DataGrid.Resources>
                        <DataGrid.ColumnHeaderStyle>
                            <Style TargetType="DataGridColumnHeader">
                                <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" />
                                <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" />
                                <Setter Property="BorderBrush" Value="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}" />
                                <Setter Property="BorderThickness" Value="0,0,1,1" />
                                <Setter Property="Padding" Value="8,6" />
                                <Setter Property="FontSize" Value="12" />
                                <Setter Property="FontWeight" Value="SemiBold" />
                                <Setter Property="HorizontalContentAlignment" Value="Left" />
                                <Setter Property="VerticalContentAlignment" Value="Center" />
                            </Style>
                        </DataGrid.ColumnHeaderStyle>
                        <DataGrid.Columns>
                            <!--  Package Name Column with metadata in second row and status border  -->
                            <DataGridTemplateColumn
                                Width="*"
                                CanUserSort="True"
                                Header="Package Name"
                                SortMemberPath="DisplayName">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Border Padding="0" Background="Transparent">
                                            <!--  Content  -->
                                            <StackPanel Margin="6,2,4,2" VerticalAlignment="Center">
                                                <DockPanel HorizontalAlignment="Left" LastChildFill="True">
                                                    <!--  Status Icons Container  -->
                                                    <StackPanel DockPanel.Dock="Right" Margin="6,0,0,0" Orientation="Horizontal" VerticalAlignment="Center">
                                                        <!--  Favorite heart  -->
                                                        <TextBlock
                                                            Margin="0,0,3,0"
                                                            FontSize="11"
                                                            FontWeight="Bold"
                                                            Foreground="#FF1493"
                                                            Text="â¤ï¸"
                                                            ToolTip="Favorite package"
                                                            Visibility="{Binding IsFavorite, Converter={StaticResource BoolToVis}}" />
                                                        <!--  AutoInstall A icon  -->
                                                        <TextBlock
                                                            Margin="0,0,3,0"
                                                            FontSize="11"
                                                            FontWeight="Bold"
                                                            Foreground="#00CED1"
                                                            Text="A"
                                                            ToolTip="AutoInstall package"
                                                            Visibility="{Binding IsAutoInstall, Converter={StaticResource BoolToVis}}" />
                                                        <!--  Optimized lightning bolt  -->
                                                        <TextBlock
                                                            Margin="0,0,3,0"
                                                            FontSize="11"
                                                            FontWeight="Bold"
                                                            Foreground="#FFC107"
                                                            Text="âš¡"
                                                            ToolTip="Package has been optimized by VPM"
                                                            Visibility="{Binding IsOptimized, Converter={StaticResource BoolToVis}}" />
                                                        <!--  Old Version indicator hourglass  -->
                                                        <TextBlock
                                                            Margin="0,0,3,0"
                                                            FontSize="11"
                                                            FontWeight="Bold"
                                                            Foreground="#FF5722"
                                                            Text="â³"
                                                            ToolTip="Old version available"
                                                            Visibility="{Binding IsOldVersion, Converter={StaticResource BoolToVis}}" />
                                                    </StackPanel>
                                                    <TextBlock
                                                        FontSize="16"
                                                        FontWeight="SemiBold"
                                                        Text="{Binding DisplayName}"
                                                        TextTrimming="CharacterEllipsis" />
                                                </DockPanel>
                                                <StackPanel Orientation="Horizontal">

                                                    <!--  Damaged Package indicator  -->
                                                    <TextBlock
                                                        Margin="0,0,2,0"
                                                        FontSize="12"
                                                        Foreground="#F44336"
                                                        Text="{Binding DamageIndicator}"
                                                        ToolTip="{Binding DamageTooltip}">
                                                        <TextBlock.Style>
                                                            <Style TargetType="TextBlock">
                                                                <Setter Property="Visibility" Value="Collapsed" />
                                                                <Style.Triggers>
                                                                    <DataTrigger Binding="{Binding IsDamaged}" Value="True">
                                                                        <Setter Property="Visibility" Value="Visible" />
                                                                    </DataTrigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </TextBlock.Style>
                                                    </TextBlock>

                                                    <TextBlock
                                                        FontSize="13"
                                                        Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                                        Text="Deps: " />
                                                    <TextBlock
                                                        FontSize="13"
                                                        FontWeight="Bold"
                                                        Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                                        Text="{Binding DependencyCount}" />
                                                    <TextBlock
                                                        Margin="10,0,0,0"
                                                        FontSize="13"
                                                        Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                                        Text="â€¢  Dependents: " />
                                                    <TextBlock
                                                        FontSize="13"
                                                        FontWeight="Bold"
                                                        Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                                        Text="{Binding DependentsCount}" />
                                                    <TextBlock
                                                        Margin="10,0,0,0"
                                                        FontSize="13"
                                                        Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                                        Text="â€¢  Size: " />
                                                    <TextBlock
                                                        FontSize="13"
                                                        FontWeight="Bold"
                                                        Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                                        Text="{Binding FileSizeFormatted}" />
                                                    <TextBlock
                                                        Margin="10,0,0,0"
                                                        FontSize="13"
                                                        Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                                        Text="â€¢  Date: " />
                                                    <TextBlock
                                                        FontSize="13"
                                                        FontWeight="Bold"
                                                        Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                                        Text="{Binding DateFormatted}" />
                                                </StackPanel>
                                                <TextBlock
                                                    Margin="0,4,0,0"
                                                    FontSize="13"
                                                    Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                                    Text="{Binding Converter={StaticResource ContentCountsConverter}}"
                                                    TextWrapping="Wrap" />
                                            </StackPanel>
                                        </Border>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>

                    <!--  Scenes List  -->
                    <DataGrid
                        x:Name="ScenesDataGrid"
                        Grid.Row="1"
                        Margin="0,0,0,8"
                        AutoGenerateColumns="False"
                        Background="Transparent"
                        BorderThickness="1"
                        CanUserAddRows="False"
                        CanUserDeleteRows="False"
                        CanUserReorderColumns="True"
                        CanUserResizeColumns="True"
                        CanUserSortColumns="True"
                        EnableColumnVirtualization="True"
                        EnableRowVirtualization="True"
                        FontSize="12"
                        GridLinesVisibility="Horizontal"
                        HeadersVisibility="None"
                        IsReadOnly="True"
                        KeyDown="ScenesDataGrid_KeyDown"
                        MouseDoubleClick="ScenesDataGrid_MouseDoubleClick"
                        RowHeaderWidth="0"
                        RowHeight="65"
                        RowStyle="{StaticResource RoundedDataGridRowStyle}"
                        ScrollViewer.CanContentScroll="True"
                        ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                        ScrollViewer.IsDeferredScrollingEnabled="True"
                        SelectionChanged="ScenesDataGrid_SelectionChanged"
                        SelectionMode="Extended"
                        VirtualizingPanel.CacheLength="10,10"
                        VirtualizingPanel.CacheLengthUnit="Item"
                        VirtualizingPanel.IsVirtualizing="True"
                        VirtualizingPanel.VirtualizationMode="Recycling"
                        Visibility="Collapsed">
                        <DataGrid.Resources>
                            <Style BasedOn="{StaticResource DataGridScrollBarStyle}" TargetType="{x:Type ScrollBar}" />
                        </DataGrid.Resources>
                        <DataGrid.Columns>
                            <!--  Thumbnail Column  -->
                            <DataGridTemplateColumn Width="70" IsReadOnly="True">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Border
                                            Width="60"
                                            Height="60"
                                            Margin="3"
                                            Background="{DynamicResource {x:Static SystemColors.WindowBrushKey}}"
                                            BorderBrush="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}"
                                            BorderThickness="1"
                                            ClipToBounds="True"
                                            CornerRadius="{StaticResource CornerRadiusValue}">
                                            <Image
                                                Source="{Binding ThumbnailPath, Converter={StaticResource ThumbnailPathConverter}}"
                                                Stretch="UniformToFill"
                                                StretchDirection="Both" />
                                        </Border>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <!--  Scene Info Column  -->
                            <DataGridTemplateColumn Width="*" IsReadOnly="True">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <StackPanel Margin="8" Orientation="Vertical">
                                            <StackPanel Margin="0,0,0,4" Orientation="Horizontal">
                                                <Grid>
                                                    <Border
                                                        x:Name="SceneDisplayBorder"
                                                        Background="Transparent"
                                                        Cursor="Hand"
                                                        PreviewMouseDown="SceneName_PreviewMouseDown"
                                                        ToolTip="Double-click to rename scene">
                                                        <TextBlock
                                                            x:Name="SceneDisplayTextBlock"
                                                            VerticalAlignment="Center"
                                                            FontSize="14"
                                                            FontWeight="Bold"
                                                            Foreground="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"
                                                            Text="{Binding DisplayName}"
                                                            TextTrimming="CharacterEllipsis" />
                                                    </Border>
                                                    <Border
                                                        x:Name="SceneEditBorder"
                                                        Padding="6,4"
                                                        Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"
                                                        BorderBrush="{StaticResource AccentPressedBrush}"
                                                        BorderThickness="2"
                                                        CornerRadius="4"
                                                        Visibility="Collapsed">
                                                        <Border.Effect>
                                                            <DropShadowEffect
                                                                BlurRadius="8"
                                                                Direction="270"
                                                                Opacity="0.5"
                                                                ShadowDepth="2"
                                                                Color="#007ACC" />
                                                        </Border.Effect>
                                                        <DockPanel>
                                                            <Button
                                                                x:Name="SceneCancelButton"
                                                                Width="24"
                                                                Height="24"
                                                                Margin="4,0,0,0"
                                                                Padding="0"
                                                                Background="#DC3545"
                                                                BorderBrush="#BB2D3B"
                                                                BorderThickness="1"
                                                                Click="SceneCancelButton_Click"
                                                                Content="âœ•"
                                                                DockPanel.Dock="Right"
                                                                FontSize="11"
                                                                FontWeight="Bold"
                                                                Foreground="White"
                                                                ToolTip="Cancel rename (ESC)">
                                                                <Button.Style>
                                                                    <Style TargetType="Button">
                                                                        <Setter Property="Template">
                                                                            <Setter.Value>
                                                                                <ControlTemplate TargetType="Button">
                                                                                    <Border
                                                                                        Background="{TemplateBinding Background}"
                                                                                        BorderBrush="{TemplateBinding BorderBrush}"
                                                                                        BorderThickness="{TemplateBinding BorderThickness}"
                                                                                        CornerRadius="3">
                                                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                                                    </Border>
                                                                                </ControlTemplate>
                                                                            </Setter.Value>
                                                                        </Setter>
                                                                        <Style.Triggers>
                                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                                <Setter Property="Background" Value="#C82333" />
                                                                                <Setter Property="BorderBrush" Value="#BD2130" />
                                                                            </Trigger>
                                                                            <Trigger Property="IsPressed" Value="True">
                                                                                <Setter Property="Background" Value="#BD2130" />
                                                                                <Setter Property="BorderBrush" Value="#B21F2D" />
                                                                            </Trigger>
                                                                        </Style.Triggers>
                                                                    </Style>
                                                                </Button.Style>
                                                            </Button>
                                                            <TextBox
                                                                x:Name="SceneEditTextBox"
                                                                Padding="4,2"
                                                                VerticalContentAlignment="Center"
                                                                Background="{DynamicResource {x:Static SystemColors.WindowBrushKey}}"
                                                                BorderBrush="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}"
                                                                BorderThickness="1"
                                                                CaretBrush="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"
                                                                FontSize="14"
                                                                FontWeight="Bold"
                                                                Foreground="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"
                                                                KeyDown="SceneNameEdit_KeyDown"
                                                                LostFocus="SceneNameEdit_LostFocus"
                                                                SelectionBrush="{StaticResource AccentPressedBrush}"
                                                                Tag="{Binding}"
                                                                Text="{Binding DisplayName, UpdateSourceTrigger=PropertyChanged}">
                                                                <TextBox.Style>
                                                                    <Style TargetType="TextBox">
                                                                        <Setter Property="Template">
                                                                            <Setter.Value>
                                                                                <ControlTemplate TargetType="TextBox">
                                                                                    <Border
                                                                                        Background="{TemplateBinding Background}"
                                                                                        BorderBrush="{TemplateBinding BorderBrush}"
                                                                                        BorderThickness="{TemplateBinding BorderThickness}"
                                                                                        CornerRadius="3">
                                                                                        <ScrollViewer x:Name="PART_ContentHost" />
                                                                                    </Border>
                                                                                </ControlTemplate>
                                                                            </Setter.Value>
                                                                        </Setter>
                                                                    </Style>
                                                                </TextBox.Style>
                                                            </TextBox>
                                                        </DockPanel>
                                                    </Border>
                                                </Grid>
                                                <TextBlock
                                                    Margin="6,0,0,0"
                                                    VerticalAlignment="Center"
                                                    FontSize="14"
                                                    FontWeight="Bold"
                                                    Foreground="#FF6B6B"
                                                    Text="â¤ï¸"
                                                    ToolTip="Marked as favorite"
                                                    Visibility="{Binding IsFavorite, Converter={StaticResource BoolToVis}}" />
                                                <TextBlock
                                                    Margin="6,0,0,0"
                                                    VerticalAlignment="Center"
                                                    FontSize="14"
                                                    FontWeight="Bold"
                                                    Foreground="#6B9EFF"
                                                    Text="ðŸ™ˆ"
                                                    ToolTip="Hidden"
                                                    Visibility="{Binding IsHidden, Converter={StaticResource BoolToVis}}" />
                                                <TextBlock
                                                    Margin="6,0,0,0"
                                                    VerticalAlignment="Center"
                                                    FontSize="14"
                                                    FontWeight="Bold"
                                                    Foreground="#FFD700"
                                                    Text="{Binding OptimizationIcon}"
                                                    ToolTip="Scene has been optimized" />
                                                <TextBlock
                                                    Margin="6,0"
                                                    VerticalAlignment="Center"
                                                    FontSize="11"
                                                    Foreground="#888888"
                                                    Text=" â€¢ " />
                                                <TextBlock
                                                    VerticalAlignment="Center"
                                                    FontSize="11"
                                                    Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                                    Text="{Binding SceneType}" />
                                                <TextBlock
                                                    Margin="6,0"
                                                    VerticalAlignment="Center"
                                                    FontSize="11"
                                                    Foreground="#888888"
                                                    Text=" â€¢ " />
                                                <TextBlock
                                                    Margin="0,0,3,0"
                                                    VerticalAlignment="Center"
                                                    FontSize="12"
                                                    Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                                    Text="{Binding SourceIcon}" />
                                                <TextBlock
                                                    VerticalAlignment="Center"
                                                    FontSize="11"
                                                    Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                                    Text="{Binding Source}" />
                                            </StackPanel>
                                            <StackPanel Margin="0,0,0,2" Orientation="Horizontal">
                                                <TextBlock
                                                    FontSize="11"
                                                    Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                                    Text="Atoms: " />
                                                <TextBlock
                                                    FontSize="11"
                                                    FontWeight="Bold"
                                                    Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                                    Text="{Binding AtomCountDisplay}" />
                                                <TextBlock
                                                    FontSize="11"
                                                    Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                                    Text="  â€¢  Deps: " />
                                                <TextBlock
                                                    FontSize="11"
                                                    FontWeight="Bold"
                                                    Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                                    Text="{Binding DependencyCount}" />
                                                <TextBlock
                                                    FontSize="11"
                                                    Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                                    Text="  â€¢  Size: " />
                                                <TextBlock
                                                    FontSize="11"
                                                    FontWeight="Bold"
                                                    Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                                    Text="{Binding FileSizeFormatted}" />
                                                <TextBlock
                                                    FontSize="11"
                                                    Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                                    Text="  â€¢  Date: " />
                                                <TextBlock
                                                    FontSize="11"
                                                    FontWeight="Bold"
                                                    Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                                    Text="{Binding DateFormatted}" />
                                            </StackPanel>
                                        </StackPanel>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>

                    <!--  Custom Atom Items List  -->
                    <DataGrid
                        x:Name="CustomAtomDataGrid"
                        Grid.Row="1"
                        Margin="0,0,0,8"
                        AutoGenerateColumns="False"
                        Background="Transparent"
                        BorderThickness="1"
                        CanUserAddRows="False"
                        CanUserDeleteRows="False"
                        CanUserReorderColumns="True"
                        CanUserResizeColumns="True"
                        CanUserSortColumns="True"
                        EnableColumnVirtualization="False"
                        EnableRowVirtualization="True"
                        FontSize="12"
                        GridLinesVisibility="Horizontal"
                        HeadersVisibility="None"
                        IsReadOnly="True"
                        KeyDown="CustomAtomDataGrid_KeyDown"
                        MouseDoubleClick="CustomAtomDataGrid_MouseDoubleClick"
                        RowHeaderWidth="0"
                        RowHeight="65"
                        RowStyle="{StaticResource RoundedDataGridRowStyle}"
                        ScrollViewer.CanContentScroll="True"
                        ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                        ScrollViewer.IsDeferredScrollingEnabled="False"
                        SelectionChanged="CustomAtomDataGrid_SelectionChanged"
                        SelectionMode="Extended"
                        VirtualizingPanel.IsVirtualizing="True"
                        VirtualizingPanel.VirtualizationMode="Recycling"
                        Visibility="Collapsed">
                        <DataGrid.Resources>
                            <Style BasedOn="{StaticResource DataGridScrollBarStyle}" TargetType="{x:Type ScrollBar}" />
                        </DataGrid.Resources>
                        <DataGrid.Columns>
                            <!--  Thumbnail Column  -->
                            <DataGridTemplateColumn Width="70" IsReadOnly="True">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Border
                                            Width="60"
                                            Height="60"
                                            Margin="3"
                                            Background="{DynamicResource {x:Static SystemColors.WindowBrushKey}}"
                                            BorderBrush="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}"
                                            BorderThickness="1"
                                            ClipToBounds="True"
                                            CornerRadius="{StaticResource CornerRadiusValue}">
                                            <Image
                                                Source="{Binding ThumbnailPath, Converter={StaticResource ThumbnailPathConverter}}"
                                                Stretch="UniformToFill"
                                                StretchDirection="Both" />
                                        </Border>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <!--  Custom Atom Item Info Column  -->
                            <DataGridTemplateColumn Width="*" IsReadOnly="True">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <StackPanel Margin="6,2,4,2" Orientation="Vertical">
                                            <!--  Row 1: Package Name + Icons + Category  -->
                                            <StackPanel Margin="0,0,0,0" Orientation="Horizontal">
                                                <Grid>
                                                    <Border
                                                        x:Name="PresetDisplayBorder"
                                                        Background="Transparent"
                                                        Cursor="Hand"
                                                        ToolTip="Double-click to open file location">
                                                        <TextBlock
                                                            x:Name="PresetDisplayTextBlock"
                                                            VerticalAlignment="Center"
                                                            FontSize="12"
                                                            FontWeight="SemiBold"
                                                            Foreground="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"
                                                            Text="{Binding DisplayName}"
                                                            TextTrimming="CharacterEllipsis" />
                                                    </Border>
                                                    <Border
                                                        x:Name="PresetEditBorder"
                                                        Padding="6,4"
                                                        Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"
                                                        BorderBrush="{StaticResource AccentPressedBrush}"
                                                        BorderThickness="2"
                                                        CornerRadius="4"
                                                        Visibility="Collapsed">
                                                        <Border.Effect>
                                                            <DropShadowEffect
                                                                BlurRadius="8"
                                                                Direction="270"
                                                                Opacity="0.5"
                                                                ShadowDepth="2"
                                                                Color="#007ACC" />
                                                        </Border.Effect>
                                                        <DockPanel>
                                                            <Button
                                                                x:Name="PresetCancelButton"
                                                                Width="24"
                                                                Height="24"
                                                                Margin="4,0,0,0"
                                                                Padding="0"
                                                                Background="#DC3545"
                                                                BorderBrush="#BB2D3B"
                                                                BorderThickness="1"
                                                                Click="PresetCancelButton_Click"
                                                                Content="âœ•"
                                                                DockPanel.Dock="Right"
                                                                FontSize="11"
                                                                FontWeight="Bold"
                                                                Foreground="White"
                                                                ToolTip="Cancel rename (ESC)">
                                                                <Button.Style>
                                                                    <Style TargetType="Button">
                                                                        <Setter Property="Template">
                                                                            <Setter.Value>
                                                                                <ControlTemplate TargetType="Button">
                                                                                    <Border
                                                                                        Background="{TemplateBinding Background}"
                                                                                        BorderBrush="{TemplateBinding BorderBrush}"
                                                                                        BorderThickness="{TemplateBinding BorderThickness}"
                                                                                        CornerRadius="3">
                                                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                                                    </Border>
                                                                                </ControlTemplate>
                                                                            </Setter.Value>
                                                                        </Setter>
                                                                        <Style.Triggers>
                                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                                <Setter Property="Background" Value="#C82333" />
                                                                                <Setter Property="BorderBrush" Value="#BD2130" />
                                                                            </Trigger>
                                                                            <Trigger Property="IsPressed" Value="True">
                                                                                <Setter Property="Background" Value="#BD2130" />
                                                                                <Setter Property="BorderBrush" Value="#B21F2D" />
                                                                            </Trigger>
                                                                        </Style.Triggers>
                                                                    </Style>
                                                                </Button.Style>
                                                            </Button>
                                                            <TextBox
                                                                x:Name="PresetEditTextBox"
                                                                Padding="4,2"
                                                                VerticalContentAlignment="Center"
                                                                Background="{DynamicResource {x:Static SystemColors.WindowBrushKey}}"
                                                                BorderBrush="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}"
                                                                BorderThickness="1"
                                                                CaretBrush="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"
                                                                FontSize="12"
                                                                FontWeight="SemiBold"
                                                                Foreground="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"
                                                                KeyDown="PresetNameEdit_KeyDown"
                                                                LostFocus="PresetNameEdit_LostFocus"
                                                                SelectionBrush="{StaticResource AccentPressedBrush}"
                                                                Tag="{Binding}"
                                                                Text="{Binding DisplayName, UpdateSourceTrigger=PropertyChanged}">
                                                                <TextBox.Style>
                                                                    <Style TargetType="TextBox">
                                                                        <Setter Property="Template">
                                                                            <Setter.Value>
                                                                                <ControlTemplate TargetType="TextBox">
                                                                                    <Border
                                                                                        Background="{TemplateBinding Background}"
                                                                                        BorderBrush="{TemplateBinding BorderBrush}"
                                                                                        BorderThickness="{TemplateBinding BorderThickness}"
                                                                                        CornerRadius="3">
                                                                                        <ScrollViewer x:Name="PART_ContentHost" />
                                                                                    </Border>
                                                                                </ControlTemplate>
                                                                            </Setter.Value>
                                                                        </Setter>
                                                                    </Style>
                                                                </TextBox.Style>
                                                            </TextBox>
                                                        </DockPanel>
                                                    </Border>
                                                </Grid>
                                                <TextBlock
                                                    Margin="3,0,0,0"
                                                    VerticalAlignment="Center"
                                                    FontSize="11"
                                                    FontWeight="Bold"
                                                    Foreground="#FF1493"
                                                    Text="â¤ï¸"
                                                    ToolTip="Marked as favorite"
                                                    Visibility="{Binding IsFavorite, Converter={StaticResource BoolToVis}}" />
                                                <TextBlock
                                                    Margin="3,0,0,0"
                                                    VerticalAlignment="Center"
                                                    FontSize="11"
                                                    FontWeight="Bold"
                                                    Foreground="#6B9EFF"
                                                    Text="ðŸ™ˆ"
                                                    ToolTip="Hidden"
                                                    Visibility="{Binding IsHidden, Converter={StaticResource BoolToVis}}" />
                                                <TextBlock
                                                    Margin="3,0,0,0"
                                                    VerticalAlignment="Center"
                                                    FontSize="11"
                                                    FontWeight="Bold"
                                                    Foreground="#FFC107"
                                                    Text="âš¡"
                                                    ToolTip="Package has been optimized"
                                                    Visibility="{Binding IsOptimized, Converter={StaticResource BoolToVis}}" />
                                                <TextBlock
                                                    Margin="6,0,2,0"
                                                    VerticalAlignment="Center"
                                                    FontSize="11"
                                                    Foreground="#888888"
                                                    Text="â€¢" />
                                                <TextBlock
                                                    Margin="2,0,0,0"
                                                    VerticalAlignment="Center"
                                                    FontSize="11"
                                                    Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                                    Text="{Binding Category}" />
                                            </StackPanel>
                                            <!--  Row 2: Deps, Size, Date  -->
                                            <StackPanel Margin="0,2,0,0" Orientation="Horizontal">
                                                <TextBlock
                                                    FontSize="11"
                                                    Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                                    Text="Deps: " />
                                                <TextBlock
                                                    FontSize="11"
                                                    FontWeight="Bold"
                                                    Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                                    Text="{Binding DependencyCount}"
                                                    ToolTip="Number of package dependencies" />
                                                <TextBlock
                                                    FontSize="11"
                                                    Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                                    Text="  â€¢  Size: " />
                                                <TextBlock
                                                    FontSize="11"
                                                    FontWeight="Bold"
                                                    Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                                    Text="{Binding FileSizeFormatted}" />
                                                <TextBlock
                                                    FontSize="11"
                                                    Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                                    Text="  â€¢  Date: " />
                                                <TextBlock
                                                    FontSize="11"
                                                    FontWeight="Bold"
                                                    Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                                    Text="{Binding DateFormatted}" />
                                            </StackPanel>
                                            <!--  Row 3: Path  -->
                                            <StackPanel Margin="0,2,0,0" Orientation="Horizontal">
                                                <TextBlock
                                                    FontSize="10"
                                                    Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                                    Text="Path: " />
                                                <TextBlock
                                                    FontSize="10"
                                                    FontWeight="Bold"
                                                    Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                                    Text="{Binding Subfolder}"
                                                    TextTrimming="CharacterEllipsis" />
                                            </StackPanel>
                                        </StackPanel>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>

                    <!--  Package Action Button Bar  -->
                    <Border
                        x:Name="PackageButtonBar"
                        Grid.Row="2"
                        Margin="0,0,0,0"
                        Padding="0"
                        VerticalAlignment="Top"
                        Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"
                        BorderBrush="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}"
                        BorderThickness="0"
                        CornerRadius="6"
                        Visibility="Visible">
                        <Border.Style>
                            <Style TargetType="Border">
                                <Style.Triggers>
                                    <Trigger Property="Visibility" Value="Visible">
                                        <Trigger.EnterActions>
                                            <BeginStoryboard>
                                                <Storyboard>
                                                    <DoubleAnimation
                                                        Storyboard.TargetProperty="Opacity"
                                                        From="0.0"
                                                        To="1.0"
                                                        Duration="0:0:0.15">
                                                        <DoubleAnimation.EasingFunction>
                                                            <QuadraticEase EasingMode="EaseOut" />
                                                        </DoubleAnimation.EasingFunction>
                                                    </DoubleAnimation>
                                                </Storyboard>
                                            </BeginStoryboard>
                                        </Trigger.EnterActions>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Border.Style>
                        <Grid
                            x:Name="ButtonLayoutGrid"
                            Margin="0"
                            VerticalAlignment="Top">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <!--  Load/Unload buttons  -->
                            <UniformGrid
                                x:Name="PackageButtonGrid"
                                Grid.Column="0"
                                Margin="0,6,0,0"
                                HorizontalAlignment="Stretch"
                                VerticalAlignment="Top"
                                Columns="2"
                                Rows="2"
                                Visibility="Visible">
                                <Button
                                    x:Name="LoadPackagesButton"
                                    Height="36"
                                    Margin="0,0,3,0"
                                    Padding="0,0"
                                    Click="LoadPackages_Click"
                                    Content="ðŸ“¥ Load"
                                    FontSize="12"
                                    FontWeight="SemiBold"
                                    ToolTip="Load selected packages"
                                    Visibility="Collapsed">
                                    <Button.Style>
                                        <Style BasedOn="{StaticResource BlueHoverButtonStyle}" TargetType="Button">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border
                                                            Padding="{TemplateBinding Padding}"
                                                            Background="{TemplateBinding Background}"
                                                            BorderBrush="{TemplateBinding BorderBrush}"
                                                            BorderThickness="{TemplateBinding BorderThickness}"
                                                            CornerRadius="6">
                                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                        </Border>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                            <Style.Triggers>
                                                <Trigger Property="Visibility" Value="Visible">
                                                    <Trigger.EnterActions>
                                                        <BeginStoryboard>
                                                            <Storyboard>
                                                                <DoubleAnimation
                                                                    Storyboard.TargetProperty="Opacity"
                                                                    From="0.0"
                                                                    To="1.0"
                                                                    Duration="0:0:0.15">
                                                                    <DoubleAnimation.EasingFunction>
                                                                        <QuadraticEase EasingMode="EaseOut" />
                                                                    </DoubleAnimation.EasingFunction>
                                                                </DoubleAnimation>
                                                            </Storyboard>
                                                        </BeginStoryboard>
                                                    </Trigger.EnterActions>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Button.Style>
                                </Button>
                                <Button
                                    x:Name="UnloadPackagesButton"
                                    Height="36"
                                    Margin="3,0,0,0"
                                    Padding="0"
                                    Click="UnloadPackages_Click"
                                    Content="ðŸ“¤ Unload"
                                    FontSize="12"
                                    FontWeight="SemiBold"
                                    ToolTip="Unload selected packages"
                                    Visibility="Collapsed">
                                    <Button.Style>
                                        <Style TargetType="Button">
                                            <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" />
                                            <Setter Property="BorderBrush" Value="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}" />
                                            <Setter Property="BorderThickness" Value="1" />
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border
                                                            Background="{TemplateBinding Background}"
                                                            BorderBrush="{TemplateBinding BorderBrush}"
                                                            BorderThickness="{TemplateBinding BorderThickness}"
                                                            CornerRadius="6">
                                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                        </Border>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="BorderBrush" Value="#FF0078D7" />
                                                    <Setter Property="BorderThickness" Value="1" />
                                                </Trigger>
                                                <Trigger Property="Visibility" Value="Visible">
                                                    <Trigger.EnterActions>
                                                        <BeginStoryboard>
                                                            <Storyboard>
                                                                <DoubleAnimation
                                                                    Storyboard.TargetProperty="Opacity"
                                                                    From="0.0"
                                                                    To="1.0"
                                                                    Duration="0:0:0.15">
                                                                    <DoubleAnimation.EasingFunction>
                                                                        <QuadraticEase EasingMode="EaseOut" />
                                                                    </DoubleAnimation.EasingFunction>
                                                                </DoubleAnimation>
                                                            </Storyboard>
                                                        </BeginStoryboard>
                                                    </Trigger.EnterActions>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Button.Style>
                                </Button>
                                <Button
                                    x:Name="LoadPackagesWithDepsButton"
                                    Height="36"
                                    Margin="0,0,3,0"
                                    Padding="0"
                                    Click="LoadPackagesWithDeps_Click"
                                    Content="ðŸ“‚ Load +Deps"
                                    FontSize="12"
                                    FontWeight="SemiBold"
                                    ToolTip="Load selected packages and their dependencies"
                                    Visibility="Collapsed">
                                    <Button.Style>
                                        <Style TargetType="Button">
                                            <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" />
                                            <Setter Property="BorderBrush" Value="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}" />
                                            <Setter Property="BorderThickness" Value="1" />
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border
                                                            Background="{TemplateBinding Background}"
                                                            BorderBrush="{TemplateBinding BorderBrush}"
                                                            BorderThickness="{TemplateBinding BorderThickness}"
                                                            CornerRadius="6">
                                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                        </Border>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="BorderBrush" Value="#FF0078D7" />
                                                    <Setter Property="BorderThickness" Value="1" />
                                                </Trigger>
                                                <Trigger Property="Visibility" Value="Visible">
                                                    <Trigger.EnterActions>
                                                        <BeginStoryboard>
                                                            <Storyboard>
                                                                <DoubleAnimation
                                                                    Storyboard.TargetProperty="Opacity"
                                                                    From="0.0"
                                                                    To="1.0"
                                                                    Duration="0:0:0.15">
                                                                    <DoubleAnimation.EasingFunction>
                                                                        <QuadraticEase EasingMode="EaseOut" />
                                                                    </DoubleAnimation.EasingFunction>
                                                                </DoubleAnimation>
                                                            </Storyboard>
                                                        </BeginStoryboard>
                                                    </Trigger.EnterActions>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Button.Style>
                                </Button>
                                <Button
                                    x:Name="ArchiveOldButton"
                                    Height="36"
                                    Margin="3,0,0,0"
                                    Padding="0,0,0,0"
                                    Click="ArchiveOldButton_Click"
                                    Content="ðŸ“¦ Archive"
                                    FontSize="12"
                                    FontWeight="SemiBold"
                                    ToolTip="Archive selected old version packages"
                                    Visibility="Collapsed">
                                    <Button.Style>
                                        <Style TargetType="Button">
                                            <Setter Property="Background" Value="#FF9800" />
                                            <Setter Property="Foreground" Value="White" />
                                            <Setter Property="BorderBrush" Value="#F57C00" />
                                            <Setter Property="BorderThickness" Value="1" />
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border
                                                            Background="{TemplateBinding Background}"
                                                            BorderBrush="{TemplateBinding BorderBrush}"
                                                            BorderThickness="{TemplateBinding BorderThickness}"
                                                            CornerRadius="6">
                                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                        </Border>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="BorderBrush" Value="#FF0078D7" />
                                                    <Setter Property="BorderThickness" Value="1" />
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Button.Style>
                                </Button>
                            </UniformGrid>

                            <!--  Fix Duplicates Button - Full Width  -->
                            <Button
                                x:Name="FixDuplicatesButton"
                                Grid.Column="0"
                                Height="36"
                                Margin="0,6,0,0"
                                Padding="0"
                                HorizontalAlignment="Stretch"
                                Click="FixSelectedDuplicates_Click"
                                Content="ðŸ”§ Fix Duplicates"
                                FontSize="12"
                                FontWeight="SemiBold"
                                Foreground="#212121"
                                ToolTip="Fix selected duplicate packages"
                                Visibility="Collapsed">
                                <Button.Style>
                                    <Style TargetType="Button">
                                        <Setter Property="Background" Value="#FFEB3B" />
                                        <Setter Property="Foreground" Value="#212121" />
                                        <Setter Property="BorderBrush" Value="#FBC02D" />
                                        <Setter Property="BorderThickness" Value="1" />
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="Button">
                                                    <Border
                                                        Background="{TemplateBinding Background}"
                                                        BorderBrush="{TemplateBinding BorderBrush}"
                                                        BorderThickness="{TemplateBinding BorderThickness}"
                                                        CornerRadius="6">
                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                    </Border>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                        <Style.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="BorderBrush" Value="#FF0078D7" />
                                                <Setter Property="BorderThickness" Value="1" />
                                            </Trigger>
                                            <Trigger Property="Visibility" Value="Visible">
                                                <Trigger.EnterActions>
                                                    <BeginStoryboard>
                                                        <Storyboard>
                                                            <DoubleAnimation
                                                                Storyboard.TargetProperty="Opacity"
                                                                From="0.0"
                                                                To="1.0"
                                                                Duration="0:0:0.15">
                                                                <DoubleAnimation.EasingFunction>
                                                                    <QuadraticEase EasingMode="EaseOut" />
                                                                </DoubleAnimation.EasingFunction>
                                                            </DoubleAnimation>
                                                        </Storyboard>
                                                    </BeginStoryboard>
                                                </Trigger.EnterActions>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </Button.Style>
                            </Button>

                            <!--  Load All Dependencies Button - Full Width (Scenes/Presets mode)  -->
                            <Button
                                x:Name="LoadAllDependenciesButton"
                                Grid.Column="0"
                                Height="36"
                                Margin="0,6,0,0"
                                Padding="0"
                                HorizontalAlignment="Stretch"
                                Click="LoadAllDependencies_Click"
                                Content="ðŸ“¥ Load All Dependencies"
                                FontSize="12"
                                FontWeight="SemiBold"
                                ToolTip="Load all dependencies for selected scenes/presets"
                                Visibility="Collapsed">
                                <Button.Style>
                                    <Style BasedOn="{StaticResource BlueHoverButtonStyle}" TargetType="Button">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="Button">
                                                    <Border
                                                        Padding="{TemplateBinding Padding}"
                                                        Background="{TemplateBinding Background}"
                                                        BorderBrush="{TemplateBinding BorderBrush}"
                                                        BorderThickness="{TemplateBinding BorderThickness}"
                                                        CornerRadius="6">
                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                    </Border>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                        <Style.Triggers>
                                            <Trigger Property="Visibility" Value="Visible">
                                                <Trigger.EnterActions>
                                                    <BeginStoryboard>
                                                        <Storyboard>
                                                            <DoubleAnimation
                                                                Storyboard.TargetProperty="Opacity"
                                                                From="0.0"
                                                                To="1.0"
                                                                Duration="0:0:0.15">
                                                                <DoubleAnimation.EasingFunction>
                                                                    <QuadraticEase EasingMode="EaseOut" />
                                                                </DoubleAnimation.EasingFunction>
                                                            </DoubleAnimation>
                                                        </Storyboard>
                                                    </BeginStoryboard>
                                                </Trigger.EnterActions>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </Button.Style>
                            </Button>
                        </Grid>
                    </Border>
                </Grid>
            </Border>

            <!--  Splitter  -->
            <GridSplitter
                Grid.Column="3"
                Width="2"
                HorizontalAlignment="Stretch"
                Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" />

            <!--  Right Panel - Dependencies & Info  -->
            <Border
                Grid.Column="4"
                Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"
                BorderBrush="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}"
                BorderThickness="1"
                CornerRadius="{StaticResource CornerRadiusValue}">
                <Grid Margin="6">
                    <Grid.RowDefinitions>
                        <!--  Dependencies Search  -->
                        <RowDefinition Height="Auto" />
                        <!--  Dependencies List + Button Bar: Adjustable height  -->
                        <RowDefinition
                            x:Name="DepsListRow"
                            Height="0.5*"
                            MinHeight="100" />
                        <!--  Splitter Row: Fixed height for resizing  -->
                        <RowDefinition x:Name="SplitterRow" Height="5" />
                        <!--  Package Information Tabs: Adjustable height  -->
                        <RowDefinition
                            x:Name="InfoRow"
                            Height="0.5*"
                            MinHeight="200" />
                    </Grid.RowDefinitions>

                    <Grid.Resources>
                        <Style TargetType="DataGrid">
                            <Setter Property="Background" Value="Transparent" />
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" />
                        </Style>
                        <Style TargetType="DataGridCell">
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" />
                            <Setter Property="Background" Value="Transparent" />
                        </Style>
                        <Style TargetType="DataGridRow">
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" />
                            <Setter Property="Background" Value="Transparent" />
                        </Style>
                    </Grid.Resources>

                    <!--  Dependencies Tabs  -->
                    <Grid
                        x:Name="DependenciesTabsContainer"
                        Grid.Row="0"
                        Margin="0,0,0,8"
                        MouseWheel="DependenciesTabs_MouseWheel">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <!--  Tab Headers  -->
                        <Grid
                            x:Name="TabHeadersGrid"
                            Grid.Row="0"
                            Margin="0,0,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition x:Name="DependentsTabColumn" Width="*" />
                            </Grid.ColumnDefinitions>

                            <Button
                                x:Name="DependenciesTab"
                                Grid.Column="0"
                                Margin="0,0,1,0"
                                Padding="10,6"
                                VerticalAlignment="Stretch"
                                HorizontalContentAlignment="Center"
                                VerticalContentAlignment="Center"
                                Click="DependenciesTab_Click"
                                FontSize="12">
                                <Button.Content>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock VerticalAlignment="Center" Text="Dependencies " />
                                        <TextBlock
                                            x:Name="DependenciesCountText"
                                            VerticalAlignment="Center"
                                            FontWeight="Bold"
                                            Text="(0)" />
                                    </StackPanel>
                                </Button.Content>
                                <Button.Style>
                                    <Style BasedOn="{StaticResource BlueHoverButtonStyle}" TargetType="Button">
                                        <Setter Property="FontWeight" Value="Normal" />
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding RelativeSource={RelativeSource Self}, Path=Tag}" Value="Active">
                                                <Setter Property="Background" Value="#FF505050" />
                                                <Setter Property="Foreground" Value="White" />
                                                <Setter Property="FontWeight" Value="Bold" />
                                                <Setter Property="BorderBrush" Value="#FF505050" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Button.Style>
                            </Button>

                            <Button
                                x:Name="DependentsTab"
                                Grid.Column="1"
                                Margin="1,0,0,0"
                                Padding="10,6"
                                VerticalAlignment="Stretch"
                                HorizontalContentAlignment="Center"
                                VerticalContentAlignment="Center"
                                Click="DependentsTab_Click"
                                FontSize="12">
                                <Button.Content>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock VerticalAlignment="Center" Text="Dependents " />
                                        <TextBlock
                                            x:Name="DependentsCountText"
                                            VerticalAlignment="Center"
                                            FontWeight="Bold"
                                            Text="(0)" />
                                    </StackPanel>
                                </Button.Content>
                                <Button.Style>
                                    <Style BasedOn="{StaticResource BlueHoverButtonStyle}" TargetType="Button">
                                        <Setter Property="FontWeight" Value="Normal" />
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding RelativeSource={RelativeSource Self}, Path=Tag}" Value="Active">
                                                <Setter Property="Background" Value="#FF505050" />
                                                <Setter Property="Foreground" Value="White" />
                                                <Setter Property="FontWeight" Value="Bold" />
                                                <Setter Property="BorderBrush" Value="#FF505050" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Button.Style>
                            </Button>
                        </Grid>

                        <!--  Search Bar  -->
                        <Grid Grid.Row="1" Margin="0,6,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <TextBox
                                x:Name="DepsSearchBox"
                                Grid.Column="0"
                                Padding="6"
                                Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                GotFocus="FilterTextBox_GotFocus"
                                LostFocus="FilterTextBox_LostFocus"
                                Text="ðŸ” Filter dependencies..."
                                TextChanged="DepsSearchBox_TextChanged" />
                            <Button
                                x:Name="DepsSearchClearButton"
                                Grid.Column="1"
                                MinWidth="30"
                                Margin="3,0,0,0"
                                Padding="3,0"
                                VerticalAlignment="Center"
                                Click="ClearFilterButton_Click"
                                Content="âœ•"
                                FontSize="12"
                                FontWeight="Bold"
                                ToolTip="Clear filter"
                                Visibility="Collapsed">
                                <Button.Style>
                                    <Style BasedOn="{StaticResource BlueHoverButtonStyle}" TargetType="Button">
                                        <Setter Property="Width" Value="{Binding ElementName=DepsSearchBox, Path=ActualHeight}" />
                                        <Setter Property="Height" Value="{Binding ElementName=DepsSearchBox, Path=ActualHeight}" />
                                    </Style>
                                </Button.Style>
                            </Button>
                            <Button
                                x:Name="DependenciesSortButton"
                                Grid.Column="3"
                                MinWidth="30"
                                Margin="3,0,0,0"
                                Padding="0"
                                VerticalAlignment="Center"
                                Click="DependenciesSortButton_Click"
                                Content="â‡…"
                                FontSize="15"
                                FontWeight="Bold"
                                MouseWheel="DependenciesSortButton_MouseWheel"
                                ToolTip="Sort dependencies (Scroll to navigate)">
                                <Button.Style>
                                    <Style BasedOn="{StaticResource BlueHoverButtonStyle}" TargetType="Button">
                                        <Setter Property="Width" Value="{Binding ElementName=DepsSearchBox, Path=ActualHeight}" />
                                        <Setter Property="Height" Value="{Binding ElementName=DepsSearchBox, Path=ActualHeight}" />
                                    </Style>
                                </Button.Style>
                            </Button>
                            <Grid Grid.Column="2" Margin="3,0,0,0">
                                <Button
                                    x:Name="DownloadMissingButton"
                                    MinWidth="30"
                                    Padding="0"
                                    Background="#FF4CAF50"
                                    Click="DownloadMissingButton_Click"
                                    Content="â¬‡ï¸"
                                    FontSize="15"
                                    FontWeight="Bold"
                                    Foreground="White"
                                    ToolTip="Download selected missing dependencies"
                                    Visibility="Collapsed">
                                    <Button.Style>
                                        <Style BasedOn="{StaticResource BlueHoverButtonStyle}" TargetType="Button">
                                            <Setter Property="Background" Value="#FF4CAF50" />
                                            <Setter Property="Foreground" Value="White" />
                                            <Setter Property="Width" Value="{Binding ElementName=DepsSearchBox, Path=ActualHeight}" />
                                            <Setter Property="Height" Value="{Binding ElementName=DepsSearchBox, Path=ActualHeight}" />
                                        </Style>
                                    </Button.Style>
                                </Button>

                                <!--  Download counter badge  -->
                                <Border
                                    x:Name="DownloadCounterBadge"
                                    Height="16"
                                    MinWidth="16"
                                    Margin="0,-6,-6,0"
                                    Padding="3,0"
                                    HorizontalAlignment="Right"
                                    VerticalAlignment="Top"
                                    Background="#FF2196F3"
                                    CornerRadius="9"
                                    Visibility="Collapsed">
                                    <TextBlock
                                        x:Name="DownloadCounterText"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        FontSize="9"
                                        FontWeight="Bold"
                                        Foreground="White"
                                        Text="0" />
                                </Border>
                            </Grid>
                        </Grid>
                    </Grid>

                    <!--  Dependencies Container (List + Button Bar)  -->
                    <Grid Grid.Row="1">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <!--  Dependencies List  -->
                        <DataGrid
                            x:Name="DependenciesDataGrid"
                            Grid.Row="0"
                            Padding="0,1,0,0"
                            AutoGenerateColumns="False"
                            Background="Transparent"
                            BorderBrush="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}"
                            BorderThickness="1"
                            CanUserAddRows="False"
                            CanUserDeleteRows="False"
                            CanUserReorderColumns="False"
                            CanUserResizeColumns="True"
                            CanUserSortColumns="True"
                            EnableColumnVirtualization="False"
                            EnableRowVirtualization="True"
                            FontSize="11"
                            Foreground="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"
                            GridLinesVisibility="Horizontal"
                            HeadersVisibility="None"
                            IsReadOnly="True"
                            RowHeaderWidth="0"
                            RowHeight="24"
                            RowStyle="{StaticResource DependencyDataGridRowStyle}"
                            ScrollViewer.CanContentScroll="True"
                            ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                            ScrollViewer.IsDeferredScrollingEnabled="False"
                            SelectionMode="Extended"
                            TextOptions.TextFormattingMode="Display"
                            VirtualizingPanel.CacheLength="10,10"
                            VirtualizingPanel.CacheLengthUnit="Item"
                            VirtualizingPanel.IsContainerVirtualizable="True"
                            VirtualizingPanel.IsVirtualizing="True"
                            VirtualizingPanel.ScrollUnit="Item"
                            VirtualizingPanel.VirtualizationMode="Recycling">
                            <DataGrid.Resources>
                                <Style BasedOn="{StaticResource DataGridScrollBarStyle}" TargetType="{x:Type ScrollBar}" />
                            </DataGrid.Resources>
                            <DataGrid.ColumnHeaderStyle>
                                <Style TargetType="DataGridColumnHeader">
                                    <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" />
                                    <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" />
                                    <Setter Property="BorderBrush" Value="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}" />
                                    <Setter Property="BorderThickness" Value="0,0,1,1" />
                                    <Setter Property="Padding" Value="8,6" />
                                    <Setter Property="FontSize" Value="12" />
                                    <Setter Property="FontWeight" Value="SemiBold" />
                                    <Setter Property="HorizontalContentAlignment" Value="Left" />
                                    <Setter Property="VerticalContentAlignment" Value="Center" />
                                </Style>
                            </DataGrid.ColumnHeaderStyle>
                            <DataGrid.Columns>

                                <!--  Dependency Name Column  -->
                                <DataGridTemplateColumn
                                    Width="*"
                                    CanUserSort="True"
                                    Header="Dependency Name"
                                    SortMemberPath="DisplayName">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock
                                                Margin="6,0,0,0"
                                                Padding="0"
                                                VerticalAlignment="Center"
                                                Text="{Binding DisplayName}"
                                                TextTrimming="CharacterEllipsis" />
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                            </DataGrid.Columns>
                        </DataGrid>

                        <!--  Dependencies Action Button Bar  -->
                        <Border
                            x:Name="DependenciesButtonBar"
                            Grid.Row="1"
                            Margin="0,0,0,0"
                            Padding="0,0"
                            Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"
                            BorderBrush="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}"
                            BorderThickness="0"
                            CornerRadius="{StaticResource CornerRadiusValue}"
                            Visibility="Collapsed">
                            <Border.Style>
                                <Style TargetType="Border">
                                    <Style.Triggers>
                                        <Trigger Property="Visibility" Value="Visible">
                                            <Trigger.EnterActions>
                                                <BeginStoryboard>
                                                    <Storyboard>
                                                        <DoubleAnimation
                                                            Storyboard.TargetProperty="Opacity"
                                                            From="0.0"
                                                            To="1.0"
                                                            Duration="0:0:0.15">
                                                            <DoubleAnimation.EasingFunction>
                                                                <QuadraticEase EasingMode="EaseOut" />
                                                            </DoubleAnimation.EasingFunction>
                                                        </DoubleAnimation>
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </Trigger.EnterActions>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>
                            <Grid
                                x:Name="DependenciesButtonGrid"
                                Margin="0,3,0,0"
                                HorizontalAlignment="Stretch">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>

                                <!--  Load / Unload positioned programmatically via code-behind for adaptive layout  -->
                                <Button
                                    x:Name="LoadDependenciesButton"
                                    Grid.Row="0"
                                    Grid.Column="0"
                                    Height="33"
                                    Margin="3"
                                    Padding="0"
                                    Click="LoadDependencies_Click"
                                    Content=" Load"
                                    FontSize="12"
                                    FontWeight="SemiBold"
                                    ToolTip="Load selected dependencies"
                                    Visibility="Collapsed">
                                    <Button.Style>
                                        <Style TargetType="Button">
                                            <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" />
                                            <Setter Property="BorderBrush" Value="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}" />
                                            <Setter Property="BorderThickness" Value="1" />
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border
                                                            Background="{TemplateBinding Background}"
                                                            BorderBrush="{TemplateBinding BorderBrush}"
                                                            BorderThickness="{TemplateBinding BorderThickness}"
                                                            CornerRadius="{StaticResource CornerRadiusValue}">
                                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                        </Border>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="BorderBrush" Value="#FF0078D7" />
                                                    <Setter Property="BorderThickness" Value="1" />
                                                </Trigger>
                                                <Trigger Property="Visibility" Value="Visible">
                                                    <Trigger.EnterActions>
                                                        <BeginStoryboard>
                                                            <Storyboard>
                                                                <DoubleAnimation
                                                                    Storyboard.TargetProperty="Opacity"
                                                                    From="0.0"
                                                                    To="1.0"
                                                                    Duration="0:0:0.15">
                                                                    <DoubleAnimation.EasingFunction>
                                                                        <QuadraticEase EasingMode="EaseOut" />
                                                                    </DoubleAnimation.EasingFunction>
                                                                </DoubleAnimation>
                                                            </Storyboard>
                                                        </BeginStoryboard>
                                                    </Trigger.EnterActions>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Button.Style>
                                </Button>
                                <Button
                                    x:Name="UnloadDependenciesButton"
                                    Grid.Row="0"
                                    Grid.Column="1"
                                    Height="33"
                                    Margin="3"
                                    Padding="0"
                                    Click="UnloadDependencies_Click"
                                    Content=" Unload"
                                    FontSize="12"
                                    FontWeight="SemiBold"
                                    ToolTip="Unload selected dependencies"
                                    Visibility="Collapsed">
                                    <Button.Style>
                                        <Style TargetType="Button">
                                            <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" />
                                            <Setter Property="BorderBrush" Value="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}" />
                                            <Setter Property="BorderThickness" Value="1" />
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border
                                                            Background="{TemplateBinding Background}"
                                                            BorderBrush="{TemplateBinding BorderBrush}"
                                                            BorderThickness="{TemplateBinding BorderThickness}"
                                                            CornerRadius="{StaticResource CornerRadiusValue}">
                                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                        </Border>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="BorderBrush" Value="#FF0078D7" />
                                                    <Setter Property="BorderThickness" Value="1" />
                                                </Trigger>
                                                <Trigger Property="Visibility" Value="Visible">
                                                    <Trigger.EnterActions>
                                                        <BeginStoryboard>
                                                            <Storyboard>
                                                                <DoubleAnimation
                                                                    Storyboard.TargetProperty="Opacity"
                                                                    From="0.0"
                                                                    To="1.0"
                                                                    Duration="0:0:0.15">
                                                                    <DoubleAnimation.EasingFunction>
                                                                        <QuadraticEase EasingMode="EaseOut" />
                                                                    </DoubleAnimation.EasingFunction>
                                                                </DoubleAnimation>
                                                            </Storyboard>
                                                        </BeginStoryboard>
                                                    </Trigger.EnterActions>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Button.Style>
                                </Button>
                                <Button
                                    x:Name="OptimizeDependenciesButton"
                                    Grid.Row="1"
                                    Grid.Column="0"
                                    Height="33"
                                    Margin="3"
                                    Padding="0"
                                    Click="OptimizeDependencies_Click"
                                    Content="âš¡ï¸ Optimize"
                                    FontSize="12"
                                    FontWeight="SemiBold"
                                    ToolTip="Optimize selected dependencies"
                                    Visibility="Collapsed">
                                    <Button.Style>
                                        <Style TargetType="Button">
                                            <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" />
                                            <Setter Property="BorderBrush" Value="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}" />
                                            <Setter Property="BorderThickness" Value="1" />
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border
                                                            Background="{TemplateBinding Background}"
                                                            BorderBrush="{TemplateBinding BorderBrush}"
                                                            BorderThickness="{TemplateBinding BorderThickness}"
                                                            CornerRadius="{StaticResource CornerRadiusValue}">
                                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                        </Border>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="BorderBrush" Value="#FF0078D7" />
                                                    <Setter Property="BorderThickness" Value="1" />
                                                </Trigger>
                                                <Trigger Property="Visibility" Value="Visible">
                                                    <Trigger.EnterActions>
                                                        <BeginStoryboard>
                                                            <Storyboard>
                                                                <DoubleAnimation
                                                                    Storyboard.TargetProperty="Opacity"
                                                                    From="0.0"
                                                                    To="1.0"
                                                                    Duration="0:0:0.15">
                                                                    <DoubleAnimation.EasingFunction>
                                                                        <QuadraticEase EasingMode="EaseOut" />
                                                                    </DoubleAnimation.EasingFunction>
                                                                </DoubleAnimation>
                                                            </Storyboard>
                                                        </BeginStoryboard>
                                                    </Trigger.EnterActions>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Button.Style>
                                </Button>
                            </Grid>
                        </Border>
                    </Grid>

                    <!--  Splitter between Deps and Tabs  -->
                    <GridSplitter
                        x:Name="DepsInfoSplitter"
                        Grid.Row="2"
                        Height="6"
                        HorizontalAlignment="Stretch"
                        Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"
                        Cursor="SizeNS"
                        ResizeBehavior="PreviousAndNext"
                        ShowsPreview="True" />

                    <!--  Package Information Tabs  -->
                    <TabControl
                        x:Name="PackageInfoTabControl"
                        Grid.Row="3"
                        Margin="0,0,0,0"
                        VerticalAlignment="Stretch"
                        VerticalContentAlignment="Stretch"
                        Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"
                        BorderBrush="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}"
                        BorderThickness="1">
                        <TabControl.Resources>
                            <Style TargetType="TabItem">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="TabItem">
                                            <Border
                                                Name="Border"
                                                Margin="2,0,0,0"
                                                Padding="12,6"
                                                Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"
                                                BorderBrush="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}"
                                                BorderThickness="1,1,1,0"
                                                CornerRadius="3,3,0,0">
                                                <ContentPresenter
                                                    x:Name="ContentSite"
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Center"
                                                    ContentSource="Header" />
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="Border" Property="BorderBrush" Value="#FF0078D7" />
                                                    <Setter TargetName="Border" Property="BorderThickness" Value="1,1,1,0" />
                                                </Trigger>
                                                <Trigger Property="IsSelected" Value="True">
                                                    <Setter TargetName="Border" Property="Background" Value="{DynamicResource {x:Static SystemColors.WindowBrushKey}}" />
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </TabControl.Resources>

                        <!--  Tab Header Panel with scroll support  -->
                        <TabControl.Template>
                            <ControlTemplate TargetType="TabControl">
                                <Grid VerticalAlignment="Stretch" KeyboardNavigation.TabNavigation="Local">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="*" />
                                    </Grid.RowDefinitions>
                                    <!--  Tab Headers with wrapping support  -->
                                    <WrapPanel
                                        Grid.Row="0"
                                        Panel.ZIndex="1"
                                        IsItemsHost="True"
                                        KeyboardNavigation.TabIndex="1"
                                        Orientation="Horizontal"
                                        PreviewMouseWheel="PackageInfoTabs_PreviewMouseWheel" />
                                    <!--  Tab Content with background  -->
                                    <Border
                                        Grid.Row="1"
                                        VerticalAlignment="Stretch"
                                        Background="{DynamicResource {x:Static SystemColors.WindowBrushKey}}"
                                        CornerRadius="0,0,4,4">
                                        <ContentPresenter
                                            Name="PART_SelectedContentHost"
                                            Margin="{TemplateBinding Padding}"
                                            VerticalAlignment="Stretch"
                                            ContentSource="SelectedContent" />
                                    </Border>
                                </Grid>
                            </ControlTemplate>
                        </TabControl.Template>

                        <!--  Default tab - Package Information  -->
                        <TabItem Header="Package Info">
                            <TabItem.Resources>
                                <!--  Custom style to override fixed height from theme  -->
                                <Style BasedOn="{StaticResource {x:Type TextBox}}" TargetType="TextBox">
                                    <Setter Property="Height" Value="Auto" />
                                    <Setter Property="VerticalAlignment" Value="Stretch" />
                                    <Setter Property="VerticalContentAlignment" Value="Top" />
                                </Style>
                            </TabItem.Resources>
                            <ScrollViewer
                                Padding="0"
                                VerticalAlignment="Stretch"
                                Background="{DynamicResource {x:Static SystemColors.WindowBrushKey}}"
                                BorderThickness="0"
                                HorizontalScrollBarVisibility="Disabled"
                                VerticalScrollBarVisibility="Auto">
                                <TextBox
                                    Name="PackageInfoTextBlock"
                                    MinHeight="100"
                                    Margin="0"
                                    Padding="0"
                                    VerticalAlignment="Stretch"
                                    VerticalContentAlignment="Top"
                                    Background="Transparent"
                                    BorderThickness="0"
                                    IsReadOnly="True"
                                    Text="Select a package to view details..."
                                    TextWrapping="Wrap" />
                            </ScrollViewer>
                        </TabItem>
                    </TabControl>

                </Grid>
            </Border>

            <!--  Splitter  -->
            <GridSplitter
                Grid.Column="5"
                Width="5"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch"
                Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"
                Cursor="SizeWE"
                ResizeBehavior="PreviousAndNext"
                ShowsPreview="True" />

            <!--  Right Panel - Images with Preview  -->
            <Border
                Grid.Column="6"
                Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"
                BorderBrush="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}"
                BorderThickness="1"
                CornerRadius="{StaticResource CornerRadiusValue}">
                <Grid Margin="6">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" MinHeight="200" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition
                            x:Name="PreviewRowDefinition"
                            Height="0"
                            MinHeight="0" />
                    </Grid.RowDefinitions>

                    <!--  Toolbar Buttons  -->
                    <Border
                        x:Name="ImagesToolbarButtonBar"
                        Grid.Row="0"
                        Margin="0,0,0,6"
                        Padding="0"
                        VerticalAlignment="Top"
                        Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"
                        BorderBrush="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}"
                        BorderThickness="0"
                        CornerRadius="6">
                        <Border.Style>
                            <Style TargetType="Border">
                                <Style.Triggers>
                                    <Trigger Property="Visibility" Value="Visible">
                                        <Trigger.EnterActions>
                                            <BeginStoryboard>
                                                <Storyboard>
                                                    <DoubleAnimation
                                                        Storyboard.TargetProperty="Opacity"
                                                        From="0.0"
                                                        To="1.0"
                                                        Duration="0:0:0.15">
                                                        <DoubleAnimation.EasingFunction>
                                                            <QuadraticEase EasingMode="EaseOut" />
                                                        </DoubleAnimation.EasingFunction>
                                                    </DoubleAnimation>
                                                </Storyboard>
                                            </BeginStoryboard>
                                        </Trigger.EnterActions>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Border.Style>
                        <StackPanel
                            x:Name="ImagesToolbarButtonGrid"
                            Margin="0"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Top"
                            Orientation="Horizontal"
                            Visibility="Visible">
                            <!--  Normal buttons  -->
                            <Button
                                x:Name="PackageDownloadsImageButton"
                                Height="36"
                                Margin="0,0,3,0"
                                Padding="8,0"
                                Click="PackageDownloadsToolbar_Click"
                                Content="ðŸ“¥ Package Downloads"
                                FontSize="12"
                                FontWeight="SemiBold"
                                ToolTip="Search and download missing packages"
                                Visibility="Visible">
                                <Button.Style>
                                    <Style BasedOn="{StaticResource BlueHoverButtonStyle}" TargetType="Button">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="Button">
                                                    <Border
                                                        Padding="{TemplateBinding Padding}"
                                                        Background="{TemplateBinding Background}"
                                                        BorderBrush="{TemplateBinding BorderBrush}"
                                                        BorderThickness="{TemplateBinding BorderThickness}"
                                                        CornerRadius="6">
                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                    </Border>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                        <Style.Triggers>
                                            <Trigger Property="Visibility" Value="Visible">
                                                <Trigger.EnterActions>
                                                    <BeginStoryboard>
                                                        <Storyboard>
                                                            <DoubleAnimation
                                                                Storyboard.TargetProperty="Opacity"
                                                                From="0.0"
                                                                To="1.0"
                                                                Duration="0:0:0.15">
                                                                <DoubleAnimation.EasingFunction>
                                                                    <QuadraticEase EasingMode="EaseOut" />
                                                                </DoubleAnimation.EasingFunction>
                                                            </DoubleAnimation>
                                                        </Storyboard>
                                                    </BeginStoryboard>
                                                </Trigger.EnterActions>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </Button.Style>
                            </Button>

                            <Button
                                x:Name="CheckUpdatesImageButton"
                                Height="36"
                                Margin="3,0,3,0"
                                Padding="8,0"
                                Click="CheckUpdatesToolbar_Click"
                                Content="ðŸ”„ Check for Updates"
                                FontSize="12"
                                FontWeight="SemiBold"
                                ToolTip="Check for package updates"
                                Visibility="Visible">
                                <Button.Style>
                                    <Style BasedOn="{StaticResource BlueHoverButtonStyle}" TargetType="Button">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="Button">
                                                    <Border
                                                        Padding="{TemplateBinding Padding}"
                                                        Background="{TemplateBinding Background}"
                                                        BorderBrush="{TemplateBinding BorderBrush}"
                                                        BorderThickness="{TemplateBinding BorderThickness}"
                                                        CornerRadius="6">
                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                    </Border>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                        <Style.Triggers>
                                            <Trigger Property="Visibility" Value="Visible">
                                                <Trigger.EnterActions>
                                                    <BeginStoryboard>
                                                        <Storyboard>
                                                            <DoubleAnimation
                                                                Storyboard.TargetProperty="Opacity"
                                                                From="0.0"
                                                                To="1.0"
                                                                Duration="0:0:0.15">
                                                                <DoubleAnimation.EasingFunction>
                                                                    <QuadraticEase EasingMode="EaseOut" />
                                                                </DoubleAnimation.EasingFunction>
                                                            </DoubleAnimation>
                                                        </Storyboard>
                                                    </BeginStoryboard>
                                                </Trigger.EnterActions>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </Button.Style>
                            </Button>

                            <Button
                                x:Name="PlayVAMImageButton"
                                Height="36"
                                Margin="3,0,0,0"
                                Padding="8,0"
                                Click="PlayVaM_Click"
                                Content="ðŸŽ® Play VAM"
                                FontSize="12"
                                FontWeight="SemiBold"
                                ToolTip="Launch VAM"
                                Visibility="Visible">
                                <Button.Style>
                                    <Style BasedOn="{StaticResource BlueHoverButtonStyle}" TargetType="Button">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="Button">
                                                    <Border
                                                        Padding="{TemplateBinding Padding}"
                                                        Background="{TemplateBinding Background}"
                                                        BorderBrush="{TemplateBinding BorderBrush}"
                                                        BorderThickness="{TemplateBinding BorderThickness}"
                                                        CornerRadius="6">
                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                    </Border>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                        <Style.Triggers>
                                            <Trigger Property="Visibility" Value="Visible">
                                                <Trigger.EnterActions>
                                                    <BeginStoryboard>
                                                        <Storyboard>
                                                            <DoubleAnimation
                                                                Storyboard.TargetProperty="Opacity"
                                                                From="0.0"
                                                                To="1.0"
                                                                Duration="0:0:0.15">
                                                                <DoubleAnimation.EasingFunction>
                                                                    <QuadraticEase EasingMode="EaseOut" />
                                                                </DoubleAnimation.EasingFunction>
                                                            </DoubleAnimation>
                                                        </Storyboard>
                                                    </BeginStoryboard>
                                                </Trigger.EnterActions>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </Button.Style>
                            </Button>

                            <!--  Play mode buttons (Desktop/VR/Custom/Cancel)  -->
                            <Button
                                x:Name="DesktopImageButton"
                                Height="36"
                                Margin="0,0,3,0"
                                Padding="8,0"
                                Click="LaunchDesktop_Click"
                                Content="ðŸ–¥ï¸ Desktop"
                                FontSize="12"
                                FontWeight="SemiBold"
                                ToolTip="Launch VirtAMate in Desktop mode"
                                Visibility="Collapsed">
                                <Button.Style>
                                    <Style BasedOn="{StaticResource BlueHoverButtonStyle}" TargetType="Button">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="Button">
                                                    <Border
                                                        Padding="{TemplateBinding Padding}"
                                                        Background="{TemplateBinding Background}"
                                                        BorderBrush="{TemplateBinding BorderBrush}"
                                                        BorderThickness="{TemplateBinding BorderThickness}"
                                                        CornerRadius="6">
                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                    </Border>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                        <Style.Triggers>
                                            <Trigger Property="Visibility" Value="Visible">
                                                <Trigger.EnterActions>
                                                    <BeginStoryboard>
                                                        <Storyboard>
                                                            <DoubleAnimation
                                                                Storyboard.TargetProperty="Opacity"
                                                                From="0.0"
                                                                To="1.0"
                                                                Duration="0:0:0.15">
                                                                <DoubleAnimation.EasingFunction>
                                                                    <QuadraticEase EasingMode="EaseOut" />
                                                                </DoubleAnimation.EasingFunction>
                                                            </DoubleAnimation>
                                                        </Storyboard>
                                                    </BeginStoryboard>
                                                </Trigger.EnterActions>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </Button.Style>
                            </Button>

                            <Button
                                x:Name="VRImageButton"
                                Height="36"
                                Margin="3,0,3,0"
                                Padding="8,0"
                                Click="LaunchVR_Click"
                                Content="ðŸ¥½ VR"
                                FontSize="12"
                                FontWeight="SemiBold"
                                ToolTip="Launch VirtAMate in VR mode"
                                Visibility="Collapsed">
                                <Button.Style>
                                    <Style BasedOn="{StaticResource BlueHoverButtonStyle}" TargetType="Button">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="Button">
                                                    <Border
                                                        Padding="{TemplateBinding Padding}"
                                                        Background="{TemplateBinding Background}"
                                                        BorderBrush="{TemplateBinding BorderBrush}"
                                                        BorderThickness="{TemplateBinding BorderThickness}"
                                                        CornerRadius="6">
                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                    </Border>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                        <Style.Triggers>
                                            <Trigger Property="Visibility" Value="Visible">
                                                <Trigger.EnterActions>
                                                    <BeginStoryboard>
                                                        <Storyboard>
                                                            <DoubleAnimation
                                                                Storyboard.TargetProperty="Opacity"
                                                                From="0.0"
                                                                To="1.0"
                                                                Duration="0:0:0.15">
                                                                <DoubleAnimation.EasingFunction>
                                                                    <QuadraticEase EasingMode="EaseOut" />
                                                                </DoubleAnimation.EasingFunction>
                                                            </DoubleAnimation>
                                                        </Storyboard>
                                                    </BeginStoryboard>
                                                </Trigger.EnterActions>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </Button.Style>
                            </Button>

                            <Button
                                x:Name="CustomImageButton"
                                Height="36"
                                Margin="3,0,3,0"
                                Padding="8,0"
                                Click="LaunchConfig_Click"
                                Content="âš™ï¸ Custom"
                                FontSize="12"
                                FontWeight="SemiBold"
                                ToolTip="Launch VirtAMate with screen selector"
                                Visibility="Collapsed">
                                <Button.Style>
                                    <Style BasedOn="{StaticResource BlueHoverButtonStyle}" TargetType="Button">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="Button">
                                                    <Border
                                                        Padding="{TemplateBinding Padding}"
                                                        Background="{TemplateBinding Background}"
                                                        BorderBrush="{TemplateBinding BorderBrush}"
                                                        BorderThickness="{TemplateBinding BorderThickness}"
                                                        CornerRadius="6">
                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                    </Border>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                        <Style.Triggers>
                                            <Trigger Property="Visibility" Value="Visible">
                                                <Trigger.EnterActions>
                                                    <BeginStoryboard>
                                                        <Storyboard>
                                                            <DoubleAnimation
                                                                Storyboard.TargetProperty="Opacity"
                                                                From="0.0"
                                                                To="1.0"
                                                                Duration="0:0:0.15">
                                                                <DoubleAnimation.EasingFunction>
                                                                    <QuadraticEase EasingMode="EaseOut" />
                                                                </DoubleAnimation.EasingFunction>
                                                            </DoubleAnimation>
                                                        </Storyboard>
                                                    </BeginStoryboard>
                                                </Trigger.EnterActions>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </Button.Style>
                            </Button>

                            <Button
                                x:Name="CancelImageButton"
                                Height="36"
                                Margin="3,0,0,0"
                                Padding="8,0"
                                Click="CancelPlay_Click"
                                Content="âœ• Cancel"
                                FontSize="12"
                                FontWeight="SemiBold"
                                ToolTip="Cancel and return to main buttons"
                                Visibility="Collapsed">
                                <Button.Style>
                                    <Style BasedOn="{StaticResource BlueHoverButtonStyle}" TargetType="Button">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="Button">
                                                    <Border
                                                        Padding="{TemplateBinding Padding}"
                                                        Background="{TemplateBinding Background}"
                                                        BorderBrush="{TemplateBinding BorderBrush}"
                                                        BorderThickness="{TemplateBinding BorderThickness}"
                                                        CornerRadius="6">
                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                    </Border>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                        <Style.Triggers>
                                            <Trigger Property="Visibility" Value="Visible">
                                                <Trigger.EnterActions>
                                                    <BeginStoryboard>
                                                        <Storyboard>
                                                            <DoubleAnimation
                                                                Storyboard.TargetProperty="Opacity"
                                                                From="0.0"
                                                                To="1.0"
                                                                Duration="0:0:0.15">
                                                                <DoubleAnimation.EasingFunction>
                                                                    <QuadraticEase EasingMode="EaseOut" />
                                                                </DoubleAnimation.EasingFunction>
                                                            </DoubleAnimation>
                                                        </Storyboard>
                                                    </BeginStoryboard>
                                                </Trigger.EnterActions>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </Button.Style>
                            </Button>
                        </StackPanel>
                    </Border>

                    <!--  Main images area with overlay controls  -->
                    <Grid Grid.Row="1">
                        <ScrollViewer
                            x:Name="ImagesScrollViewer"
                            BorderBrush="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}"
                            BorderThickness="1"
                            HorizontalScrollBarVisibility="Disabled"
                            PreviewMouseWheel="ImagesScrollViewer_PreviewMouseWheel"
                            ScrollChanged="OnProgressiveScrollChanged"
                            VerticalScrollBarVisibility="Auto">
                            <ScrollViewer.Template>
                                <ControlTemplate TargetType="ScrollViewer">
                                    <Border
                                        BorderBrush="{TemplateBinding BorderBrush}"
                                        BorderThickness="{TemplateBinding BorderThickness}"
                                        CornerRadius="{StaticResource CornerRadiusValue}">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="*" />
                                                <RowDefinition Height="Auto" />
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="Auto" />
                                            </Grid.ColumnDefinitions>
                                            <ScrollContentPresenter Grid.Row="0" Grid.Column="0" />
                                            <ScrollBar
                                                Name="PART_VerticalScrollBar"
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                Maximum="{TemplateBinding ScrollableHeight}"
                                                Orientation="Vertical"
                                                ViewportSize="{TemplateBinding ViewportHeight}"
                                                Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"
                                                Value="{TemplateBinding VerticalOffset}" />
                                            <ScrollBar
                                                Name="PART_HorizontalScrollBar"
                                                Grid.Row="1"
                                                Grid.Column="0"
                                                Maximum="{TemplateBinding ScrollableWidth}"
                                                Orientation="Horizontal"
                                                ViewportSize="{TemplateBinding ViewportWidth}"
                                                Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}"
                                                Value="{TemplateBinding HorizontalOffset}" />
                                        </Grid>
                                    </Border>
                                </ControlTemplate>
                            </ScrollViewer.Template>
                            <StackPanel x:Name="ImagesPanel" Margin="3">
                                <!--  Images will be populated dynamically  -->
                                <Border Padding="12" HorizontalAlignment="Stretch">
                                    <TextBlock
                                        Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                                        Text="No images available"
                                        TextAlignment="Center"
                                        TextWrapping="Wrap" />
                                </Border>
                            </StackPanel>
                        </ScrollViewer>

                        <!--  Hoverable overlay controls - positioned at bottom right of image area  -->
                        <Border
                            x:Name="ImageControlsOverlay"
                            Margin="0,0,16,16"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Bottom"
                            Panel.ZIndex="10"
                            Background="#CC000000"
                            CornerRadius="6"
                            Opacity="0.4">
                            <Border.Style>
                                <Style TargetType="Border">
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Opacity" Value="1" />
                                            <Setter Property="Background" Value="#E6000000" />
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>
                            <Grid Margin="6,6">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <!--  Column adjustment buttons on the right  -->
                                <StackPanel Grid.Column="2" Orientation="Horizontal">
                                    <Button
                                        Width="26"
                                        Height="26"
                                        Margin="0,0,3,0"
                                        Padding="0,0"
                                        Click="DecreaseImageColumns_Click"
                                        Content="âˆ’"
                                        FontSize="12"
                                        FontWeight="Bold"
                                        ToolTip="Decrease columns (Ctrl+-)">
                                        <Button.Style>
                                            <Style TargetType="Button">
                                                <Setter Property="Background" Value="#40FFFFFF" />
                                                <Setter Property="Foreground" Value="White" />
                                                <Setter Property="BorderThickness" Value="1" />
                                                <Setter Property="BorderBrush" Value="#60FFFFFF" />
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="Button">
                                                            <Border
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                                CornerRadius="{StaticResource CornerRadiusValue}">
                                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                            </Border>
                                                            <ControlTemplate.Triggers>
                                                                <Trigger Property="IsMouseOver" Value="True">
                                                                    <Setter Property="Background" Value="#80FFFFFF" />
                                                                    <Setter Property="BorderBrush" Value="#FFFFFFFF" />
                                                                </Trigger>
                                                                <Trigger Property="IsPressed" Value="True">
                                                                    <Setter Property="Background" Value="#A0FFFFFF" />
                                                                    <Setter Property="BorderBrush" Value="#FFFFFFFF" />
                                                                </Trigger>
                                                            </ControlTemplate.Triggers>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>
                                        </Button.Style>
                                    </Button>
                                    <Button
                                        Width="26"
                                        Height="26"
                                        Padding="0,0"
                                        Click="IncreaseImageColumns_Click"
                                        Content="+"
                                        FontSize="12"
                                        FontWeight="Bold"
                                        ToolTip="Increase columns (Ctrl++)">
                                        <Button.Style>
                                            <Style TargetType="Button">
                                                <Setter Property="Background" Value="#40FFFFFF" />
                                                <Setter Property="Foreground" Value="White" />
                                                <Setter Property="BorderThickness" Value="1" />
                                                <Setter Property="BorderBrush" Value="#60FFFFFF" />
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="Button">
                                                            <Border
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                                CornerRadius="{StaticResource CornerRadiusValue}">
                                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                            </Border>
                                                            <ControlTemplate.Triggers>
                                                                <Trigger Property="IsMouseOver" Value="True">
                                                                    <Setter Property="Background" Value="#80FFFFFF" />
                                                                    <Setter Property="BorderBrush" Value="#FFFFFFFF" />
                                                                </Trigger>
                                                                <Trigger Property="IsPressed" Value="True">
                                                                    <Setter Property="Background" Value="#A0FFFFFF" />
                                                                    <Setter Property="BorderBrush" Value="#FFFFFFFF" />
                                                                </Trigger>
                                                            </ControlTemplate.Triggers>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>
                                        </Button.Style>
                                    </Button>
                                </StackPanel>
                            </Grid>
                        </Border>
                    </Grid>

                    <!--  Preview Panel Splitter  -->
                    <GridSplitter
                        x:Name="PreviewSplitter"
                        Grid.Row="2"
                        Height="5"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Center"
                        Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"
                        Cursor="SizeNS"
                        ResizeBehavior="PreviousAndNext"
                        ShowsPreview="True"
                        Visibility="Collapsed" />

                    <!--  Preview Panel  -->
                    <Border
                        x:Name="PreviewPanel"
                        Grid.Row="3"
                        Background="{DynamicResource {x:Static SystemColors.WindowBrushKey}}"
                        BorderBrush="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}"
                        BorderThickness="1,1,1,0"
                        CornerRadius="0,0,3,3"
                        Visibility="Collapsed">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>

                            <!--  Preview Header with Search  -->
                            <Border
                                Grid.Row="0"
                                Padding="8,6"
                                Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"
                                BorderBrush="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}"
                                BorderThickness="0,0,0,1">
                                <Grid x:Name="PreviewSearchPanel" Visibility="Collapsed">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>

                                    <!--  Title/Label  -->
                                    <TextBlock
                                        x:Name="PreviewHeaderText"
                                        Grid.Column="0"
                                        Margin="0,0,15,0"
                                        VerticalAlignment="Center"
                                        FontSize="12"
                                        FontWeight="SemiBold"
                                        Foreground="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"
                                        Text="Preview" />

                                    <!--  Search label  -->
                                    <TextBlock
                                        Grid.Column="1"
                                        Margin="0,0,9,0"
                                        VerticalAlignment="Center"
                                        FontSize="12"
                                        FontWeight="SemiBold"
                                        Foreground="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"
                                        Text="ðŸ“ Search:" />

                                    <!--  Search textbox  -->
                                    <TextBox
                                        x:Name="PreviewSearchBox"
                                        Grid.Column="2"
                                        Height="27"
                                        Margin="0,0,9,0"
                                        Padding="6,3,6,3"
                                        VerticalAlignment="Center"
                                        VerticalContentAlignment="Center"
                                        FontSize="12" />

                                    <!--  Match counter  -->
                                    <TextBlock
                                        x:Name="PreviewMatchCounter"
                                        Grid.Column="3"
                                        MinWidth="81"
                                        Margin="0,0,9,0"
                                        VerticalAlignment="Center"
                                        FontSize="12"
                                        FontWeight="SemiBold"
                                        Foreground="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"
                                        TextAlignment="Right" />

                                    <!--  Case sensitivity toggle  -->
                                    <CheckBox
                                        x:Name="PreviewCaseToggle"
                                        Grid.Column="4"
                                        Margin="0,0,3,0"
                                        VerticalAlignment="Center"
                                        Content="Aa"
                                        FontSize="9"
                                        FontWeight="Bold"
                                        ToolTip="Match case" />

                                    <!--  Previous button  -->
                                    <Button
                                        x:Name="PreviewPrevButton"
                                        Grid.Column="5"
                                        Width="27"
                                        Height="27"
                                        Margin="0,0,3,0"
                                        Content="â€“Â²"
                                        FontSize="12"
                                        FontWeight="Bold"
                                        ToolTip="Previous match (Shift+Enter)" />

                                    <!--  Next button  -->
                                    <Button
                                        x:Name="PreviewNextButton"
                                        Grid.Column="6"
                                        Width="27"
                                        Height="27"
                                        Margin="0,0,3,0"
                                        Content="â€“Â¼"
                                        FontSize="12"
                                        FontWeight="Bold"
                                        ToolTip="Next match (Enter)" />

                                    <!--  Close button  -->
                                    <Button
                                        x:Name="ClosePreviewButton"
                                        Grid.Column="7"
                                        Width="21"
                                        Height="21"
                                        Background="Transparent"
                                        BorderThickness="0"
                                        Click="ClosePreview_Click"
                                        Content="âœ•"
                                        FontSize="9"
                                        FontWeight="Bold"
                                        Foreground="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"
                                        ToolTip="Close preview">
                                        <Button.Style>
                                            <Style TargetType="Button">
                                                <Setter Property="Background" Value="Transparent" />
                                                <Setter Property="BorderThickness" Value="0" />
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="Button">
                                                            <Border
                                                                Padding="2"
                                                                Background="{TemplateBinding Background}"
                                                                CornerRadius="3">
                                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                            </Border>
                                                            <ControlTemplate.Triggers>
                                                                <Trigger Property="IsMouseOver" Value="True">
                                                                    <Setter Property="Background" Value="#20FF0000" />
                                                                </Trigger>
                                                                <Trigger Property="IsPressed" Value="True">
                                                                    <Setter Property="Background" Value="#40FF0000" />
                                                                </Trigger>
                                                            </ControlTemplate.Triggers>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>
                                        </Button.Style>
                                    </Button>
                                </Grid>
                            </Border>

                            <!--  Preview Content Area  -->
                            <ScrollViewer
                                x:Name="PreviewContentScrollViewer"
                                Grid.Row="1"
                                Padding="8"
                                Background="{DynamicResource {x:Static SystemColors.WindowBrushKey}}"
                                HorizontalScrollBarVisibility="Auto"
                                VerticalScrollBarVisibility="Auto">
                                <ContentPresenter x:Name="PreviewContentPresenter" />
                            </ScrollViewer>
                        </Grid>
                    </Border>
                </Grid>
            </Border>
        </Grid>
    </DockPanel>
</Window>
