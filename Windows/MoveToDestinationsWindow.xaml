<Window x:Class="VPM.Windows.MoveToDestinationsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Configure Move To Destinations" 
        Width="700" Height="500"
        MinWidth="500" MinHeight="400"
        WindowStartupLocation="CenterOwner"
        Background="#2d2d2d"
        Foreground="#e0e0e0"
        ResizeMode="CanResize"
        TextOptions.TextFormattingMode="Display"
        Loaded="Window_Loaded">
    
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="15"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="15"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="20"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <StackPanel Grid.Row="0">
            <TextBlock Text="ðŸ“ Move To Destinations" 
                       FontSize="18" FontWeight="Bold" 
                       Foreground="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}" 
                       Margin="0,0,0,8"/>
            <TextBlock Text="Configure destination folders for quickly moving packages. These will appear in the right-click context menu under 'Move To'." 
                       FontSize="13" 
                       Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}" 
                       TextWrapping="Wrap"/>
        </StackPanel>
        
        <!-- DataGrid -->
        <Border Grid.Row="2" 
                BorderBrush="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}" 
                BorderThickness="1" 
                CornerRadius="4"
                Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}">
            <DataGrid x:Name="DestinationsDataGrid"
                      AutoGenerateColumns="False"
                      CanUserAddRows="False"
                      CanUserDeleteRows="False"
                      CanUserReorderColumns="False"
                      SelectionMode="Single"
                      RowHeight="32"
                      HeadersVisibility="Column"
                      GridLinesVisibility="Horizontal"
                      Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"
                      Foreground="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"
                      RowBackground="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"
                      AlternatingRowBackground="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"
                      BorderThickness="0"
                      SelectionChanged="DestinationsDataGrid_SelectionChanged">
                <DataGrid.ColumnHeaderStyle>
                    <Style TargetType="DataGridColumnHeader">
                        <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
                        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
                        <Setter Property="BorderBrush" Value="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}"/>
                        <Setter Property="BorderThickness" Value="0,0,1,1"/>
                        <Setter Property="Padding" Value="8,6"/>
                        <Setter Property="FontWeight" Value="SemiBold"/>
                    </Style>
                </DataGrid.ColumnHeaderStyle>
                <DataGrid.CellStyle>
                    <Style TargetType="DataGridCell">
                        <Setter Property="Background" Value="Transparent"/>
                        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
                        <Setter Property="BorderThickness" Value="0"/>
                        <Style.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
                                <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </DataGrid.CellStyle>
                <DataGrid.RowStyle>
                    <Style TargetType="DataGridRow">
                        <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
                        <Style.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </DataGrid.RowStyle>
                <DataGrid.Columns>
                    <DataGridCheckBoxColumn Header="âœ“" Width="40" Binding="{Binding IsEnabled, UpdateSourceTrigger=PropertyChanged}">
                        <DataGridCheckBoxColumn.ElementStyle>
                            <Style TargetType="CheckBox">
                                <Setter Property="HorizontalAlignment" Value="Center"/>
                                <Setter Property="VerticalAlignment" Value="Center"/>
                            </Style>
                        </DataGridCheckBoxColumn.ElementStyle>
                    </DataGridCheckBoxColumn>
                    <DataGridTextColumn Header="Name" Width="100" Binding="{Binding Name, UpdateSourceTrigger=PropertyChanged}">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="TextAlignment" Value="Center"/>
                                <Setter Property="VerticalAlignment" Value="Center"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    <DataGridTextColumn Header="Path" Width="*" Binding="{Binding Path, UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="TextAlignment" Value="Center"/>
                                <Setter Property="VerticalAlignment" Value="Center"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    <DataGridCheckBoxColumn Header="Show" Width="50" Binding="{Binding ShowInMainTable, UpdateSourceTrigger=PropertyChanged}">
                        <DataGridCheckBoxColumn.ElementStyle>
                            <Style TargetType="CheckBox">
                                <Setter Property="HorizontalAlignment" Value="Center"/>
                                <Setter Property="VerticalAlignment" Value="Center"/>
                                <Setter Property="ToolTip" Value="Show packages from this destination in main table"/>
                            </Style>
                        </DataGridCheckBoxColumn.ElementStyle>
                    </DataGridCheckBoxColumn>
                    <DataGridTemplateColumn Header="Color" Width="60">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Button Width="32" Height="22" 
                                        Background="{Binding StatusColorBrush}" 
                                        BorderBrush="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}"
                                        BorderThickness="1"
                                        ToolTip="Click to change status color"
                                        Click="ColorPickerButton_Click"
                                        Cursor="Hand">
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}" 
                                                    BorderBrush="{TemplateBinding BorderBrush}" 
                                                    BorderThickness="{TemplateBinding BorderThickness}"
                                                    CornerRadius="3"/>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTextColumn Header="Description" Width="120" Binding="{Binding Description, UpdateSourceTrigger=PropertyChanged}">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="TextAlignment" Value="Center"/>
                                <Setter Property="VerticalAlignment" Value="Center"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                </DataGrid.Columns>
            </DataGrid>
        </Border>
        
        <!-- Action Buttons -->
        <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Left">
            <Button x:Name="AddButton" Content="âž• Add" Width="80" Height="32" 
                    Margin="0,0,10,0" Click="AddButton_Click"/>
            <Button x:Name="EditButton" Content="âœï¸ Edit" Width="80" Height="32" 
                    Margin="0,0,10,0" Click="EditButton_Click" IsEnabled="False"/>
            <Button x:Name="RemoveButton" Content="ðŸ—‘ï¸ Remove" Width="90" Height="32" 
                    Margin="0,0,10,0" Click="RemoveButton_Click" IsEnabled="False"/>
            <Button x:Name="MoveUpButton" Content="â¬†ï¸ Up" Width="70" Height="32" 
                    Margin="0,0,10,0" Click="MoveUpButton_Click" IsEnabled="False"/>
            <Button x:Name="MoveDownButton" Content="â¬‡ï¸ Down" Width="80" Height="32" 
                    Click="MoveDownButton_Click" IsEnabled="False"/>
        </StackPanel>
        
        <!-- Bottom Button Panel -->
        <Grid Grid.Row="6">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            
            <!-- Status Text -->
            <TextBlock x:Name="StatusText" Grid.Column="0" 
                       VerticalAlignment="Center" 
                       Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}" 
                       FontSize="12"/>
            
            <!-- Buttons -->
            <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right">
                <Button x:Name="SaveButton" Content="ðŸ’¾ Save" 
                        MinWidth="100" Height="36" FontWeight="SemiBold"
                        Click="SaveButton_Click" Margin="0,0,10,0"/>
                <Button Content="Cancel" MinWidth="80" Height="36" 
                        Click="CancelButton_Click"/>
            </StackPanel>
        </Grid>
    </Grid>
</Window>
