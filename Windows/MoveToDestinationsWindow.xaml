<Window
    x:Class="VPM.Windows.MoveToDestinationsWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Configure Move To Destinations"
    Width="700"
    Height="500"
    MinWidth="500"
    MinHeight="400"
    Background="#2d2d2d"
    Foreground="#e0e0e0"
    Loaded="Window_Loaded"
    ResizeMode="CanResize"
    TextOptions.TextFormattingMode="Display"
    WindowStartupLocation="CenterOwner">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="15" />
            <RowDefinition Height="*" />
            <RowDefinition Height="15" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="20" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!--  Header  -->
        <StackPanel Grid.Row="0">
            <TextBlock
                Margin="0,0,0,8"
                FontSize="18"
                FontWeight="Bold"
                Foreground="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"
                Text="ðŸ“ Move To Destinations" />
            <TextBlock
                FontSize="13"
                Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                Text="Configure destination folders for quickly moving packages. These will appear in the right-click context menu under 'Move To'."
                TextWrapping="Wrap" />
        </StackPanel>

        <!--  DataGrid  -->
        <Border
            Grid.Row="2"
            Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"
            BorderBrush="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}"
            BorderThickness="1"
            CornerRadius="4">
            <DataGrid
                x:Name="DestinationsDataGrid"
                AlternatingRowBackground="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"
                AutoGenerateColumns="False"
                Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"
                BorderThickness="0"
                CanUserAddRows="False"
                CanUserDeleteRows="False"
                CanUserReorderColumns="False"
                Foreground="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"
                GridLinesVisibility="Horizontal"
                HeadersVisibility="Column"
                RowBackground="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"
                RowHeight="32"
                SelectionChanged="DestinationsDataGrid_SelectionChanged"
                SelectionMode="Single">
                <DataGrid.ColumnHeaderStyle>
                    <Style TargetType="DataGridColumnHeader">
                        <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" />
                        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" />
                        <Setter Property="BorderBrush" Value="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}" />
                        <Setter Property="BorderThickness" Value="0,0,1,1" />
                        <Setter Property="Padding" Value="8,6" />
                        <Setter Property="FontWeight" Value="SemiBold" />
                        <Setter Property="HorizontalContentAlignment" Value="Center" />
                    </Style>
                </DataGrid.ColumnHeaderStyle>
                <DataGrid.CellStyle>
                    <Style TargetType="DataGridCell">
                        <Setter Property="Background" Value="Transparent" />
                        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" />
                        <Setter Property="BorderThickness" Value="0" />
                        <Style.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}" />
                                <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}" />
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </DataGrid.CellStyle>
                <DataGrid.RowStyle>
                    <Style TargetType="DataGridRow">
                        <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" />
                        <Style.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}" />
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </DataGrid.RowStyle>
                <DataGrid.Columns>
                    <DataGridTemplateColumn Width="60" Header="Color">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Button
                                    Width="32"
                                    Height="22"
                                    Background="{Binding StatusColorBrush}"
                                    BorderBrush="{DynamicResource {x:Static SystemColors.ActiveBorderBrushKey}}"
                                    BorderThickness="1"
                                    Click="ColorPickerButton_Click"
                                    Cursor="Hand"
                                    ToolTip="Click to change status color">
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border
                                                Background="{TemplateBinding Background}"
                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                CornerRadius="3" />
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridCheckBoxColumn
                        Width="40"
                        Binding="{Binding IsEnabled, UpdateSourceTrigger=PropertyChanged}"
                        Header="â‰¡">
                        <DataGridCheckBoxColumn.ElementStyle>
                            <Style TargetType="CheckBox">
                                <Setter Property="HorizontalAlignment" Value="Center" />
                                <Setter Property="VerticalAlignment" Value="Center" />
                                <Setter Property="ToolTip" Value="Show this destination in the context menu" />
                            </Style>
                        </DataGridCheckBoxColumn.ElementStyle>
                    </DataGridCheckBoxColumn>
                    <DataGridTextColumn
                        Width="100"
                        Binding="{Binding Name, UpdateSourceTrigger=PropertyChanged}"
                        Header="Name">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="TextAlignment" Value="Center" />
                                <Setter Property="HorizontalAlignment" Value="Center" />
                                <Setter Property="VerticalAlignment" Value="Center" />
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    <DataGridTextColumn
                        Width="*"
                        Binding="{Binding Path, UpdateSourceTrigger=PropertyChanged}"
                        Header="Path"
                        IsReadOnly="True">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="TextAlignment" Value="Center" />
                                <Setter Property="VerticalAlignment" Value="Center" />
                                <Setter Property="HorizontalAlignment" Value="Center" />
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    <DataGridCheckBoxColumn
                        Width="60"
                        Binding="{Binding ShowInMainTable, UpdateSourceTrigger=PropertyChanged}"
                        Header="Show">
                        <DataGridCheckBoxColumn.ElementStyle>
                            <Style TargetType="CheckBox">
                                <Setter Property="HorizontalAlignment" Value="Center" />
                                <Setter Property="VerticalAlignment" Value="Center" />
                                <Setter Property="ToolTip" Value="Show packages from this destination in main table" />
                            </Style>
                        </DataGridCheckBoxColumn.ElementStyle>
                    </DataGridCheckBoxColumn>
                    <DataGridTextColumn
                        Width="120"
                        Binding="{Binding Description, UpdateSourceTrigger=PropertyChanged}"
                        Header="Description">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="TextAlignment" Value="Center" />
                                <Setter Property="VerticalAlignment" Value="Center" />
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                </DataGrid.Columns>
            </DataGrid>
        </Border>

        <!--  Action Buttons  -->
        <StackPanel
            Grid.Row="4"
            HorizontalAlignment="Left"
            Orientation="Horizontal">
            <Button
                x:Name="AddButton"
                Width="80"
                Height="32"
                Margin="0,0,10,0"
                Click="AddButton_Click"
                Content="âž• Add" />
            <Button
                x:Name="EditButton"
                Width="80"
                Height="32"
                Margin="0,0,10,0"
                Click="EditButton_Click"
                Content="âœï¸ Edit"
                IsEnabled="False" />
            <Button
                x:Name="RemoveButton"
                Width="90"
                Height="32"
                Margin="0,0,10,0"
                Click="RemoveButton_Click"
                Content="ðŸ—‘ï¸ Remove"
                IsEnabled="False" />
            <Button
                x:Name="MoveUpButton"
                Width="70"
                Height="32"
                Margin="0,0,10,0"
                Click="MoveUpButton_Click"
                Content="â¬†ï¸ Up"
                IsEnabled="False" />
            <Button
                x:Name="MoveDownButton"
                Width="80"
                Height="32"
                Click="MoveDownButton_Click"
                Content="â¬‡ï¸ Down"
                IsEnabled="False" />
        </StackPanel>

        <!--  Bottom Button Panel  -->
        <Grid Grid.Row="6">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <!--  Status Text  -->
            <TextBlock
                x:Name="StatusText"
                Grid.Column="0"
                VerticalAlignment="Center"
                FontSize="12"
                Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}" />

            <!--  Buttons  -->
            <StackPanel
                Grid.Column="1"
                HorizontalAlignment="Right"
                Orientation="Horizontal">
                <Button
                    x:Name="SaveButton"
                    Height="36"
                    MinWidth="100"
                    Margin="0,0,10,0"
                    Click="SaveButton_Click"
                    Content="ðŸ’¾ Save"
                    FontWeight="SemiBold" />
                <Button
                    Height="36"
                    MinWidth="80"
                    Click="CancelButton_Click"
                    Content="Cancel" />
            </StackPanel>
        </Grid>
    </Grid>
</Window>
